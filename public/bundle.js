var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function s(e){let t;return a(e,(e=>t=e))(),t}function l(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function m(){return p(" ")}function h(){return p("")}function g(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e){return function(t){return t.preventDefault(),e.call(this,t)}}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return""===e?null:+e}function E(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){e.value=null==t?"":t}function T(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function S(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function _(e,t,n){e.classList[n?"add":"remove"](t)}let O;function R(e){O=e}function $(){if(!O)throw new Error("Function called outside component initialization");return O}function P(e){$().$$.after_update.push(e)}function x(){const e=$();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach((t=>{t.call(e,o)}))}}}const I=[],N=[],k=[],C=[],L=Promise.resolve();let D=!1;function A(e){k.push(e)}function U(e){C.push(e)}let M=!1;const F=new Set;function q(){if(!M){M=!0;do{for(let e=0;e<I.length;e+=1){const t=I[e];R(t),j(t.$$)}for(R(null),I.length=0;N.length;)N.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];F.has(t)||(F.add(t),t())}k.length=0}while(I.length);for(;C.length;)C.pop()();D=!1,M=!1,F.clear()}}function j(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(A)}}const W=new Set;let B;function H(){B={r:0,c:[],p:B}}function z(){B.r||r(B.c),B=B.p}function Y(e,t){e&&e.i&&(W.delete(e),e.i(t))}function Q(e,t,n,r){if(e&&e.o){if(W.has(e))return;W.add(e),B.c.push((()=>{W.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function J(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function V(e){e&&e.c()}function X(e,n,i){const{fragment:a,on_mount:s,on_destroy:l,after_update:u}=e.$$;a&&a.m(n,i),A((()=>{const n=s.map(t).filter(o);l?l.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(A)}function G(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(I.push(e),D||(D=!0,L.then(q)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,o,i,a,s,l,u=[-1]){const d=O;R(t);const f=o.props||{},p=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let m=!1;if(p.ctx=i?i(t,f,((e,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&s(p.ctx[e],p.ctx[e]=o)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](o),m&&Z(t,e)),n})):[],p.update(),m=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(c)}else p.fragment&&p.fragment.c();o.intro&&Y(t.$$.fragment),X(t,o.target,o.anchor),q()}R(d)}class ee{$destroy(){G(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const te=[];var ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function re(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oe(e,t){return e(t={exports:{}},t.exports),t.exports}var ie=oe((function(e,t){var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.getHightlightString=t.LineType=t.getHightlightPositions=t.processDateTime=t.ProcessDateTimeWhich=t.initializeDateTime=t.getStep=void 0,t.getStep=function(e){let t=0,n="0.";for(;t++<e;){if(t>=e)return n+"1";n+="0"}return"1"},t.initializeDateTime=function(e){const t=e.value.indexOf("T"),n=e.date?e.date:t>-1?e.value.substring(0,t):"",r=e.time?e.time:t>-1?e.value.substring(t+1):"";return{value:n&&r?n+"T"+r:"",date:n,time:r}},function(e){e.DATE="DATE",e.TIME="TIME"}(n=t.ProcessDateTimeWhich||(t.ProcessDateTimeWhich={})),t.processDateTime=function(e,t){const r=e.value.indexOf("T");let o=e.value.substring(0,r),i=e.value.substring(r+1);return o&&t!=n.DATE||(o=e.date||""),i&&t!=n.TIME||(i=e.time||""),{value:o&&i?o+"T"+i:"",date:o,time:i}},t.getHightlightPositions=function(e,t){return(e||[]).filter((e=>void 0!==e)).reduce(((e,n)=>e.concat(function(e,n){let r=-1,o=[];for(;!o.some((e=>-1===e));)r=e.indexOf(n,r+1),o.push(r);return o.filter((e=>-1!==e)).filter((e=>(0==e||!t[e-1].match(/[a-z0-9_]/))&&(e+n.length>=t.length||!t[e+n.length].match(/[a-z0-9_]/)))).map((e=>({begin:e,end:n.length+e})))}(t,""+n))),[])},function(e){e.Field="Field",e.String="String"}(r=t.LineType||(t.LineType={})),t.getHightlightString=function(e,t){const n=e.concat([]).sort(((e,t)=>e.begin-t.begin));let o=0;const i=[];return n.forEach((e=>{o>e.begin||(i.push({type:r.String,value:t.substring(o,e.begin)}),i.push({type:r.Field,value:t.substring(e.begin,e.end)}),o=e.end)})),i.push({type:r.String,value:t.substring(o)}),i}}));re(ie);var ae=ie.getHightlightString,se=(ie.LineType,ie.getHightlightPositions),le=ie.processDateTime,ue=(ie.ProcessDateTimeWhich,ie.initializeDateTime),ce=ie.getStep;function de(t){let n,r,o,i,a=t[0].text+"";return{c(){n=f("a"),r=p(a),w(n,"href",o=t[0].href),w(n,"class",i=t[0].class?t[0].class:"")},m(e,t){u(e,n,t),l(n,r)},p(e,[t]){1&t&&a!==(a=e[0].text+"")&&E(r,a),1&t&&o!==(o=e[0].href)&&w(n,"href",o),1&t&&i!==(i=e[0].class?e[0].class:"")&&w(n,"class",i)},i:e,o:e,d(e){e&&c(n)}}}function fe(e,t,n){let{link:r}=t;return e.$$set=e=>{"link"in e&&n(0,r=e.link)},[r]}class pe extends ee{constructor(e){super(),K(this,e,fe,de,i,{link:0})}}function me(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,me)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(me,Error),me.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}return"Expected "+function(e){var t,r,o,i=new Array(e.length);for(t=0;t<e.length;t++)i[t]=(o=e[t],n[o.type](o));if(i.sort(),i.length>0){for(t=1,r=1;t<i.length;t++)i[t-1]!==i[t]&&(i[r]=i[t],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."};var he={SyntaxError:me,parse:function(e,t){t=void 0!==t?t:{};var n,r,o,i,a={},s={Statement:k},l=k,u=$("{",!1),c=$("}",!1),d=" ",f=$(" ",!1),p=$("$$",!1),m=$("$",!1),h=/^[^a-z{$]/,g=P([["a","z"],"{","$"],!0,!1),v=/^[a-z]/,w=P([["a","z"]],!1,!1),y=/^[a-z_]/,E=P([["a","z"],"_"],!1,!1),b=/^[^$]/,T=P(["$"],!0,!1),S=0,_=[{line:1,column:1}],O=0,R=[];if("startRule"in t){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');l=s[t.startRule]}function $(e,t){return{type:"literal",text:e,ignoreCase:t}}function P(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function x(t){var n,r=_[t];if(r)return r;for(n=t-1;!_[n];)n--;for(r={line:(r=_[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return _[t]=r,r}function I(e,t){var n=x(e),r=x(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function N(e){S<O||(S>O&&(O=S,R=[]),R.push(e))}function k(){var e,t;if(e=[],(t=C())===a&&(t=L())===a&&(t=D()),t!==a)for(;t!==a;)e.push(t),(t=C())===a&&(t=L())===a&&(t=D());else e=a;return e}function C(){var t,n,r,o,i,s,l;return t=S,q()!==a?(123===e.charCodeAt(S)?(n="{",S++):(n=a,N(u)),n!==a?((r=function(){var t,n,r;t=S,(n=function(){var t,n;t=[],v.test(e.charAt(S))?(n=e.charAt(S),S++):(n=a,N(w));if(n!==a)for(;n!==a;)t.push(n),v.test(e.charAt(S))?(n=e.charAt(S),S++):(n=a,N(w));else t=a;return t}())!==a?(32===e.charCodeAt(S)?(r=d,S++):(r=a,N(f)),r!==a?t=n=n.reduce(((e,t)=>e+t),""):(S=t,t=a)):(S=t,t=a);return t}())===a&&(r=null),r!==a&&(o=function(){var t,n,r,o,i,s;if(t=S,(n=M())!==a){for(r=[],o=S,32===e.charCodeAt(S)?(i=d,S++):(i=a,N(f)),i!==a&&(s=M())!==a?o=i=[i,s]:(S=o,o=a);o!==a;)r.push(o),o=S,32===e.charCodeAt(S)?(i=d,S++):(i=a,N(f)),i!==a&&(s=M())!==a?o=i=[i,s]:(S=o,o=a);r!==a?t=n=[n].concat(r.map((([e,t])=>t))):(S=t,t=a)}else S=t,t=a;return t}())!==a?(125===e.charCodeAt(S)?(i="}",S++):(i=a,N(c)),i!==a?(l=o,t={function:(s=r)&&s.length?s:"noop",variable:l}):(S=t,t=a)):(S=t,t=a)):(S=t,t=a)):(S=t,t=a),t}function L(){var e,t;return e=S,q()!==a&&(t=M())!==a?e={type:"VARIABLE",function:"noop",variable:[t]}:(S=e,e=a),e}function D(){var e,t;if(S,e=[],(t=U())===a&&(t=A())===a&&(t=F()),t!==a)for(;t!==a;)e.push(t),(t=U())===a&&(t=A())===a&&(t=F());else e=a;return e!==a&&(e={type:"TEXT",text:e.reduce(((e,t)=>e+t),"")}),e}function A(){var t;return S,"$$"===e.substr(S,2)?(t="$$",S+=2):(t=a,N(p)),t!==a&&(t="$"),t}function U(){var t,n,r;return t=S,36===e.charCodeAt(S)?(n="$",S++):(n=a,N(m)),n!==a?(h.test(e.charAt(S))?(r=e.charAt(S),S++):(r=a,N(g)),r!==a?t=n="$"+r:(S=t,t=a)):(S=t,t=a),t}function M(){var t,n,r,o;if(t=S,v.test(e.charAt(S))?(n=e.charAt(S),S++):(n=a,N(w)),n!==a){for(r=[],y.test(e.charAt(S))?(o=e.charAt(S),S++):(o=a,N(E));o!==a;)r.push(o),y.test(e.charAt(S))?(o=e.charAt(S),S++):(o=a,N(E));r!==a?t=n=n+r.reduce(((e,t)=>e+t),""):(S=t,t=a)}else S=t,t=a;return t}function F(){var t;return b.test(e.charAt(S))?(t=e.charAt(S),S++):(t=a,N(T)),t}function q(){var t;return 36===e.charCodeAt(S)?(t="$",S++):(t=a,N(m)),t}if((n=l())!==a&&S===e.length)return n;throw n!==a&&S<e.length&&N({type:"end"}),r=R,o=O<e.length?e.charAt(O):null,i=O<e.length?I(O,O+1):I(O,O),new me(me.buildMessage(r,o),r,o,i)}},ge=oe((function(e,t){var n,r=ne&&ne.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=ne&&ne.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};function i(e){return he.parse(e)}function a(e){function t(e){for(var t=[],n=0;n<e.length-1;n++)t.push(e[n]);return t}function n(e){if(0===e.length)throw new Error("newlineBreak: list: Empty");return e[e.length-1]}return e.reduce((function(e,i){if("string"!=typeof i)return o(t(e),[n(e).concat([i])]);var a=r(i.split(/[\r\n]/)),s=a[0],l=a.slice(1);return o(t(e),[n(e).concat([s])]).concat(l.map((function(e){return[e]})))}),[[]])}function s(e){function t(e){var t=e.replace("\t","    "),n=t.match(/^ +/);return null===n?t:n[0].replace(/ /g," ")+t.substr(n[0].length)}return{tagIdClass:"div.line",inner:e.map((function(e){if("string"==typeof e)return{tagIdClass:"span",inner:t(e),attrs:{}};if("select"===(e=e).type)return{tagIdClass:"select",inner:[],attrs:{name:e.name}};if("string"===e.type)return{tagIdClass:"input",inner:[],attrs:{name:e.name}};if("integer"===e.type)return{tagIdClass:"input",inner:[],attrs:{name:e.name,type:"number"}};if("server"===e.type)return{tagIdClass:"span",inner:"$"+t(e.name),attrs:{}};throw new Error("Unknown parameter type "+e.type)})),attrs:{}}}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.TEXT="TEXT",e.VARIABLE="VARIABLE"}(n=t.ParsedType||(t.ParsedType={})),t.rawParse=i,t.removeLineBeginningWhitespace=function(e){var t=e.replace(/^\n/,"").match(/^([ \t]*)/);return t?e.split("\n").map((function(e){return 0===e.indexOf(t[1])?e.replace(t[1],""):e})).join("\n"):e},t.normalize=function(e,t){return("string"==typeof t?[t]:t).reduce((function(t,r){return"string"!=typeof r?t.concat(r):i(r).reduce((function(t,r){if(r.type===n.TEXT)return t.concat(r.text);if("noop"!==r.function)throw new Error("The function for a variable must be noop");if(1!==r.variable.length)throw new Error("Only one variable for a ${} is allowed");return t.concat(function(t){var n=e.find((function(e){return e.name===t}));if(void 0===n)throw new Error("Statement refers to parameter "+t+" but it does not exist");return n}(r.variable[0]))}),t)}),[])},t.newlineBreak=a,t.html_line=s,t.html=function(e){return{tagIdClass:"div",attrs:{},inner:a(e).map(s)}},t.forHyper=function e(t,n){return t([n.tagIdClass,n.inner instanceof Array?n.inner.map((function(n){return n instanceof String?n:e(t,n)})):n.inner,n.attrs])}}));re(ge);ge.ParsedType,ge.rawParse,ge.removeLineBeginningWhitespace,ge.normalize,ge.newlineBreak,ge.html_line,ge.html,ge.forHyper;var ve=oe((function(e,t){function n(e,t,n){if("string"==typeof e)throw new Error("renderLink: Requires normalizeLink to be called first: "+e);function r(e){return e.map((e=>""+t[e]||""))}function o(e){if("noop"==e.fun)return r(e.namesOfFields)[0];if("popup"==e.fun){const t=r(e.namesOfFields);if(2!=t.length)throw new Error("generation of a popup link requires 2 params");return encodeURIComponent(t[0])+" "+encodeURIComponent(t[1])}throw new Error(`Unknown function '${e.fun}'`)}return e.reduce(((e,t)=>"string"==typeof t?e+t:n?e+encodeURIComponent(o(t)):e+o(t)),"")}Object.defineProperty(t,"__esModule",{value:!0}),t.queryComponentsToArguments=t.pushBackToControlStore=t.popBackFromArguments=t.addBackValuesToControlStore=t.getLink=t.asRow=t.normalizeLink=t.serializeValues=t.getControlStore=t.addControlStoreToEsqlateQueryComponents=t.urlSearchParamsToArguments=void 0,t.urlSearchParamsToArguments=function(e){let t=[];for(let[n,r]of e.entries())t.push({name:n,val:r});return t},t.addControlStoreToEsqlateQueryComponents=function(e,t){const n=new Set(Object.getOwnPropertyNames(e));return Object.getOwnPropertyNames(e).reduce(((t,n)=>{return t.concat([{name:n,val:(r=e[n],r.hasOwnProperty("value")?r.value:"")}]);var r}),t.filter((({name:e})=>!n.has(e))))},t.getControlStore=function(e,t,n){const r=e.reduce(((e,{name:t,val:n})=>(e.set(t,n),e)),new Map);function o(e,t){return t.some((t=>t.value==e))?e:t.length?t[0].value:""}return t.reduce((function(e,t){let i="";if(r.has(t.name)&&(i=r.get(t.name)),"select"==t.type){const r=function(e){const t=n.filter((t=>t.parameter.name==e.name));if(0===t.length)return[];const r=t[0].result;if("preview"!=r.status&&"complete"!=r.status)return[];let o=-1,i=-1;return r.fields.forEach(((t,n)=>{t.name==e.value_field&&(o=n),t.name==e.display_field&&(i=n)})),-1==o||-1==i?[]:r.rows.map((e=>({display:""+e[i],value:""+e[o]})))}(t);return Object.assign(Object.assign({},e),{[t.name]:{options:r,value:o(i,r)}})}return Object.assign(Object.assign({},e),{[t.name]:{value:i}})}),{})},t.serializeValues=function(e){return e.map((e=>{const t=void 0===e.val?"":encodeURIComponent(e.val);return`${encodeURIComponent(e.name)}=${t}`})).join("&")},t.normalizeLink=function(e,t){const n=new Set(e.map((e=>e))),r={noop:1,popup:2};function o(e){return ge.rawParse(e).map((e=>{if(e.type==ge.ParsedType.TEXT)return e.text;if(r[e.function]!=e.variable.length)throw new Error(`Function ${e.function} takes ${r[e.function]} parameters`);return e.variable.forEach((e=>{if(!n.has(e))throw new Error("Variable ${v} in link template, but not a known variable")})),{namesOfFields:e.variable,fun:e.function}}))}return{class:t.hasOwnProperty("class")?t.class:"",text:t.text?o(t.text):o(t.href),href:o(t.href)}},t.asRow=function(e,t,n){const r=n.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.val})),{});return t.reduce(((t,n,r)=>Object.assign(Object.assign({},t),{[n.name]:e[r]})),r)},t.getLink=function(e,t){return{text:n(e.hasOwnProperty("text")?e.text:e.href,t,!1),href:n(e.href,t,!0),class:e.hasOwnProperty("class")?e.class:""}},t.addBackValuesToControlStore=function(e,t){return e.reduce(((e,t)=>{const n=t.name.match(/^_b[a-z]{1,9}([0-9]{1,3})/);return n?Object.assign(Object.assign({},e),{[n[0]]:{value:""+t.val}}):e}),t)},t.popBackFromArguments=function(e){const t=function(e){return e.reduce(((e,t)=>{const n=t.name.match(/^_burl([0-9]{1,3})/);return n&&parseInt(n[1])>e?parseInt(n[1]):e}),-1)}(e);if(t<0)throw new Error("popBackFromArguments: No back links found");return e.reduce(((e,n)=>{const r=n.name.match(/^_b([a-z]{0,9})([0-9]{1,3})/);return r&&parseInt(r[2])==t?Object.assign(Object.assign({},e),{[r[1]]:decodeURIComponent(n.val)}):e}),{url:"",fld:"",def:"",dis:"",val:""})},t.pushBackToControlStore=function(e,t){const n=Object.getOwnPropertyNames(e).reduce(((e,t)=>{const n=t.match(/^_burl([0-9]{1,3})/);return n&&parseInt(n[1])>e?parseInt(n[1]):e}),-1);return Object.assign(Object.assign({},e),{["_burl"+(n+1)]:{value:t.url},["_bfld"+(n+1)]:{value:t.fld},["_bdef"+(n+1)]:{value:t.def},["_bdis"+(n+1)]:{value:t.dis},["_bval"+(n+1)]:{value:t.val}})},t.queryComponentsToArguments=function(e,t){const n=new Set(e.filter((e=>"popup"==e.type)).map((e=>e.name)));return t.map((e=>{const t=void 0===e.val?"":e.val;if(n.has(e.name)){const n=decodeURIComponent((""+t).replace(/ .*/,""));return{name:e.name,value:n}}return{name:e.name,value:t}})).filter((e=>"#"!==e.name.substring(0,1)))}}));re(ve);var we=ve.queryComponentsToArguments,ye=(ve.pushBackToControlStore,ve.popBackFromArguments),Ee=(ve.addBackValuesToControlStore,ve.getLink),be=ve.asRow,Te=ve.normalizeLink,Se=ve.serializeValues,_e=(ve.getControlStore,ve.addControlStoreToEsqlateQueryComponents),Oe=ve.urlSearchParamsToArguments;function Re(e,t,n){var r,o,i,a,s;function l(){var u=Date.now()-a;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(i,o),i=o=null))}null==t&&(t=100);var u=function(){i=this,o=arguments,a=Date.now();var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(i,o),i=o=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(i,o),i=o=null,clearTimeout(r),r=null)},u}Re.debounce=Re;var $e=Re;function Pe(e,t,n){const r=e.slice();return r[18]=t[n],r}function xe(e,t,n){const r=e.slice();return r[21]=t[n],r[23]=n,r}function Ie(e,t,n){const r=e.slice();return r[15]=t[n],r}function Ne(e,t,n){const r=e.slice();return r[24]=t[n],r}function ke(e){let t,n,r,o,i,a,s,p,h,g,v,y=e[1].fields,E=[];for(let t=0;t<y.length;t+=1)E[t]=Ce(Ne(e,y,t));let b=(e[0].row_links&&e[0].row_links.length||e[2])&&Le(),S=e[1].rows||[],_=[];for(let t=0;t<S.length;t+=1)_[t]=Be(Ie(e,S,t));const O=e=>Q(_[e],1,1,(()=>{_[e]=null}));function R(e,t){return e[2]?Ye:e[1].full_data_set?He:ze}let $=R(e),P=$(e);return{c(){t=f("div"),n=f("div"),r=f("div"),o=f("table"),i=f("thead"),a=f("tr");for(let e=0;e<E.length;e+=1)E[e].c();s=m(),b&&b.c(),p=m(),h=f("tbody");for(let e=0;e<_.length;e+=1)_[e].c();g=m(),P.c(),w(o,"class","results-head table table-striped table-hover"),T(o,"padding-bottom","0"),T(o,"margin","0"),w(r,"id","table-holder"),w(r,"class","svelte-u220hq"),w(n,"class","column col-auto"),T(n,"margin","0 auto"),w(t,"class","columns")},m(e,c){u(e,t,c),l(t,n),l(n,r),l(r,o),l(o,i),l(i,a);for(let e=0;e<E.length;e+=1)E[e].m(a,null);l(a,s),b&&b.m(a,null),l(o,p),l(o,h);for(let e=0;e<_.length;e+=1)_[e].m(h,null);l(n,g),P.m(n,null),v=!0},p(e,t){if(2&t){let n;for(y=e[1].fields,n=0;n<y.length;n+=1){const r=Ne(e,y,n);E[n]?E[n].p(r,t):(E[n]=Ce(r),E[n].c(),E[n].m(a,s))}for(;n<E.length;n+=1)E[n].d(1);E.length=y.length}if(e[0].row_links&&e[0].row_links.length||e[2]?b||(b=Le(),b.c(),b.m(a,null)):b&&(b.d(1),b=null),431&t){let n;for(S=e[1].rows||[],n=0;n<S.length;n+=1){const r=Ie(e,S,n);_[n]?(_[n].p(r,t),Y(_[n],1)):(_[n]=Be(r),_[n].c(),Y(_[n],1),_[n].m(h,null))}for(H(),n=S.length;n<_.length;n+=1)O(n);z()}$===($=R(e))&&P?P.p(e,t):(P.d(1),P=$(e),P&&(P.c(),P.m(n,null)))},i(e){if(!v){for(let e=0;e<S.length;e+=1)Y(_[e]);v=!0}},o(e){_=_.filter(Boolean);for(let e=0;e<_.length;e+=1)Q(_[e]);v=!1},d(e){e&&c(t),d(E,e),b&&b.d(),d(_,e),P.d()}}}function Ce(e){let t,n,r,o=e[24].name+"";return{c(){t=f("th"),n=p(o),w(t,"style",r="text-align: "+Ve(e[24])),w(t,"class","svelte-u220hq")},m(e,r){u(e,t,r),l(t,n)},p(e,i){2&i&&o!==(o=e[24].name+"")&&E(n,o),2&i&&r!==(r="text-align: "+Ve(e[24]))&&w(t,"style",r)},d(e){e&&c(t)}}}function Le(e){let t;return{c(){t=f("th"),w(t,"class","svelte-u220hq")},m(e,n){u(e,t,n)},d(e){e&&c(t)}}}function De(e){let t,n=e[21]+"";return{c(){t=p(n)},m(e,n){u(e,t,n)},p(e,r){2&r&&n!==(n=e[21]+"")&&E(t,n)},d(e){e&&c(t)}}}function Ae(e){let t,n=e[7](e[1].fields[e[23]].type)(e[21])+"";return{c(){t=p(n)},m(e,n){u(e,t,n)},p(e,r){2&r&&n!==(n=e[7](e[1].fields[e[23]].type)(e[21])+"")&&E(t,n)},d(e){e&&c(t)}}}function Ue(t){let n;return{c(){n=p("NULL")},m(e,t){u(e,n,t)},p:e,d(e){e&&c(n)}}}function Me(e){let t,n,r,o;function i(e,t){return null===e[21]?Ue:((null==n||2&t)&&(n=!!e[7](e[1].fields[e[23]].type)),n?Ae:De)}let a=i(e,-1),s=a(e);return{c(){t=f("td"),s.c(),w(t,"style",r="text-align: "+Ve(e[1].fields[e[23]])),w(t,"data-field-name",o=e[1].fields[e[23]].name)},m(e,n){u(e,t,n),s.m(t,null)},p(e,n){a===(a=i(e,n))&&s?s.p(e,n):(s.d(1),s=a(e),s&&(s.c(),s.m(t,null))),2&n&&r!==(r="text-align: "+Ve(e[1].fields[e[23]]))&&w(t,"style",r),2&n&&o!==(o=e[1].fields[e[23]].name)&&w(t,"data-field-name",o)},d(e){e&&c(t),s.d()}}}function Fe(e){let t,n,r,o;const i=[je,qe],a=[];function s(e,t){return e[2]?0:1}return t=s(e),n=a[t]=i[t](e),{c(){n.c(),r=h()},m(e,n){a[t].m(e,n),u(e,r,n),o=!0},p(e,o){let l=t;t=s(e),t===l?a[t].p(e,o):(H(),Q(a[l],1,1,(()=>{a[l]=null})),z(),n=a[t],n||(n=a[t]=i[t](e),n.c()),Y(n,1),n.m(r.parentNode,r))},i(e){o||(Y(n),o=!0)},o(e){Q(n),o=!1},d(e){a[t].d(e),e&&c(r)}}}function qe(e){let t,n,r=e[0].row_links||[],o=[];for(let t=0;t<r.length;t+=1)o[t]=We(Pe(e,r,t));const i=e=>Q(o[e],1,1,(()=>{o[e]=null}));return{c(){t=f("td");for(let e=0;e<o.length;e+=1)o[e].c();T(t,"text-align","left")},m(e,r){u(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(291&n){let a;for(r=e[0].row_links||[],a=0;a<r.length;a+=1){const i=Pe(e,r,a);o[a]?(o[a].p(i,n),Y(o[a],1)):(o[a]=We(i),o[a].c(),Y(o[a],1),o[a].m(t,null))}for(H(),a=r.length;a<o.length;a+=1)i(a);z()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Y(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Q(o[e]);n=!1},d(e){e&&c(t),d(o,e)}}}function je(t){let n,r,o,i;function a(...e){return t[10](t[15],...e)}return{c(){n=f("td"),r=f("button"),r.textContent="Pick",w(r,"class","btn btn-link"),T(n,"text-align","center")},m(e,t){u(e,n,t),l(n,r),o||(i=g(r,"click",a),o=!0)},p(e,n){t=e},i:e,o:e,d(e){e&&c(n),o=!1,i()}}}function We(e){let t,n;return t=new pe({props:{link:Ee(Te(e[8](e[5]),e[18]),be(e[15],e[1].fields,e[5]))}}),{c(){V(t.$$.fragment)},m(e,r){X(t,e,r),n=!0},p(e,n){const r={};35&n&&(r.link=Ee(Te(e[8](e[5]),e[18]),be(e[15],e[1].fields,e[5]))),t.$set(r)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Be(e){let t,n,r,o,i=e[15],a=[];for(let t=0;t<i.length;t+=1)a[t]=Me(xe(e,i,t));let s=(e[0].row_links&&e[0].row_links.length||e[2])&&Fe(e);return{c(){t=f("tr");for(let e=0;e<a.length;e+=1)a[e].c();n=m(),s&&s.c(),r=m()},m(e,i){u(e,t,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null);l(t,n),s&&s.m(t,null),l(t,r),o=!0},p(e,o){if(130&o){let r;for(i=e[15],r=0;r<i.length;r+=1){const s=xe(e,i,r);a[r]?a[r].p(s,o):(a[r]=Me(s),a[r].c(),a[r].m(t,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}e[0].row_links&&e[0].row_links.length||e[2]?s?(s.p(e,o),5&o&&Y(s,1)):(s=Fe(e),s.c(),Y(s,1),s.m(t,r)):s&&(H(),Q(s,1,1,(()=>{s=null})),z())},i(e){o||(Y(s),o=!0)},o(e){Q(s),o=!1},d(e){e&&c(t),d(a,e),s&&s.d()}}}function He(e){let t,n,r,i,a,s;return{c(){t=f("div"),n=p("All the results are showing but you can still "),r=f("a"),r.textContent="download the results",i=p("."),w(r,"href","#show-downloads"),w(t,"class","toast toast-success toast-resultset-warning")},m(c,d){u(c,t,d),l(t,n),l(t,r),l(t,i),a||(s=g(r,"click",v((function(){o(e[4])&&e[4].apply(this,arguments)}))),a=!0)},p(t,n){e=t},d(e){e&&c(t),a=!1,s()}}}function ze(e){let t,n,r,i,a,s;return{c(){t=f("div"),n=p("⚠ Warning: This result set is very large and not all are shown. If you want to see the full results you will have to "),r=f("a"),r.textContent="download them",i=p("."),w(r,"href","#show-downloads"),w(t,"class","toast toast-warning toast-resultset-warning")},m(c,d){u(c,t,d),l(t,n),l(t,r),l(t,i),a||(s=g(r,"click",v((function(){o(e[4])&&e[4].apply(this,arguments)}))),a=!0)},p(t,n){e=t},d(e){e&&c(t),a=!1,s()}}}function Ye(e){let t,n=!e[1].full_data_set&&Qe();return{c(){n&&n.c(),t=h()},m(e,r){n&&n.m(e,r),u(e,t,r)},p(e,r){e[1].full_data_set?n&&(n.d(1),n=null):n||(n=Qe(),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&c(t)}}}function Qe(e){let t;return{c(){t=f("div"),t.textContent="⚠ The result set is very large and not all results are shown.",w(t,"class","toast toast-warning toast-resultset-warning")},m(e,n){u(e,t,n)},d(e){e&&c(t)}}}function Je(e){let t,n,r,o,i,a=e[1]&&("complete"==e[1].status||"preview"==e[1].status)&&ke(e);return{c(){t=f("div"),n=f("style"),o=m(),a&&a.c(),w(n,"id",r=e[6]+"-style"),w(n,"class","svelte-u220hq"),w(t,"id",e[6]),w(t,"class","svelte-u220hq")},m(e,r){u(e,t,r),l(t,n),l(t,o),a&&a.m(t,null),i=!0},p(e,[n]){!e[1]||"complete"!=e[1].status&&"preview"!=e[1].status?a&&(H(),Q(a,1,1,(()=>{a=null})),z()):a?(a.p(e,n),2&n&&Y(a,1)):(a=ke(e),a.c(),Y(a,1),a.m(t,null))},i(e){i||(Y(a),i=!0)},o(e){Q(a),i=!1},d(e){e&&c(t),a&&a.d()}}}function Ve(e){return e.type.indexOf("text")>-1||e.type.indexOf("char")>-1||e.type.indexOf("date")>-1||e.type.indexOf("time")>-1||e.type.indexOf("jsonb")>-1?"left":"right"}function Xe(e,t,n){let{definition:r}=t,{controls:o}=t,{result:i}=t,{inPopup:a}=t,{pick:s}=t,{showDownloads:l}=t;const u=a?"in-popup-results":"out-popup-results";function c(){if(!document.getElementById(u+"-style"))return;const e=function(){const e=document.getElementById(u+"-style").sheet;for(let t=0;t<e.rules.length;t++)e.removeRule(0);return e}(),t=document.getElementById("code-input-area")?document.getElementById("code-input-area").getBoundingClientRect().width:640;e.insertRule(`#table-holder { min-width: ${t}px }`)}const d=new Intl.DateTimeFormat(window.navigator.language,{year:"numeric",month:"2-digit",day:"2-digit"}),f=new Intl.DateTimeFormat(window.navigator.language,{hour:"numeric",minute:"numeric",second:"numeric",year:"numeric",month:"2-digit",day:"2-digit"}),p={date:e=>d.format(new Date(e)),timestamp:e=>f.format(new Date(e)),jsonb:e=>JSON.stringify(e)};let m=[];P(c),window.onresize=$e(c,200);return e.$$set=e=>{"definition"in e&&n(0,r=e.definition),"controls"in e&&n(9,o=e.controls),"result"in e&&n(1,i=e.result),"inPopup"in e&&n(2,a=e.inPopup),"pick"in e&&n(3,s=e.pick),"showDownloads"in e&&n(4,l=e.showDownloads)},e.$$.update=()=>{var t,r;514&e.$$.dirty&&n(5,m=(r=o,Object.getOwnPropertyNames(r||{}).map((e=>({name:e,val:r[e].value})))).concat((t=i)&&t.rows&&t.rows.length?t.fields.map(((e,n)=>({name:e.name,val:t.rows[0][n]}))):[]))},[r,i,a,s,l,m,u,function(e){return p.hasOwnProperty(e)?p[e]:null},function(e){return e.map((({name:e})=>e)).concat(i&&i.fields?(i.fields||[]).map((({name:e})=>e)):[])},o,(e,t)=>s(e)]}class Ge extends ee{constructor(e){super(),K(this,e,Xe,Je,i,{definition:0,controls:9,result:1,inPopup:2,pick:3,showDownloads:4})}}function Ze(t){let n,i,a,s,l,d,p,h,v,y,E,b,T;return{c(){n=f("input"),d=m(),p=f("input"),w(n,"data-highlight-fields",i=JSON.stringify(t[1].highlight_fields)),w(n,"id",a="input-"+t[1].name),w(n,"data-parameter-name",s=t[1].name),w(n,"type","date"),n.value=l=ue(t[0]).date||"",w(p,"data-highlight-fields",h=JSON.stringify(t[1].highlight_fields)),w(p,"id",v="input-"+t[1].name+"-time"),w(p,"data-parameter-name",y=t[1].name),w(p,"type","time"),p.value=E=ue(t[0]).time||""},m(e,r){u(e,n,r),u(e,d,r),u(e,p,r),b||(T=[g(n,"focus",(function(){o(t[3])&&t[3].apply(this,arguments)})),g(n,"blur",(function(){o(t[2])&&t[2].apply(this,arguments)})),g(n,"change",t[4]),g(p,"focus",(function(){o(t[3])&&t[3].apply(this,arguments)})),g(p,"blur",(function(){o(t[2])&&t[2].apply(this,arguments)})),g(p,"change",t[5])],b=!0)},p(e,[r]){t=e,2&r&&i!==(i=JSON.stringify(t[1].highlight_fields))&&w(n,"data-highlight-fields",i),2&r&&a!==(a="input-"+t[1].name)&&w(n,"id",a),2&r&&s!==(s=t[1].name)&&w(n,"data-parameter-name",s),1&r&&l!==(l=ue(t[0]).date||"")&&(n.value=l),2&r&&h!==(h=JSON.stringify(t[1].highlight_fields))&&w(p,"data-highlight-fields",h),2&r&&v!==(v="input-"+t[1].name+"-time")&&w(p,"id",v),2&r&&y!==(y=t[1].name)&&w(p,"data-parameter-name",y),1&r&&E!==(E=ue(t[0]).time||"")&&(p.value=E)},i:e,o:e,d(e){e&&c(n),e&&c(d),e&&c(p),b=!1,r(T)}}}function Ke(e,t,n){let{parameter:r}=t,{control:o}=t,{onblur:i}=t,{onfocus:a}=t,{onerror:s}=t,{onfix:l}=t;const u=x();function c(){r.empty_string_is_null||(""!=o.value?l(r.name,r.highlight_fields):s(r.name,r.highlight_fields))}return c(),e.$$set=e=>{"parameter"in e&&n(1,r=e.parameter),"control"in e&&n(0,o=e.control),"onblur"in e&&n(2,i=e.onblur),"onfocus"in e&&n(3,a=e.onfocus),"onerror"in e&&n(6,s=e.onerror),"onfix"in e&&n(7,l=e.onfix)},[o,r,i,a,function({target:{value:e}}){try{n(0,o=le({...o,date:e},"DATE")),u("newvalue",{name:r.name,control:o}),c()}catch(e){s(r.name,r.highlight_fields)}},function({target:{value:e}}){try{n(0,o={...le({...o,time:e},"TIME")}),u("newvalue",{name:r.name,control:o}),c()}catch(e){s(r.name,r.highlight_fields)}},s,l]}class et extends ee{constructor(e){super(),K(this,e,Ke,Ze,i,{parameter:1,control:0,onblur:2,onfocus:3,onerror:6,onfix:7})}}function tt(t){let n,r,o,i,a,s,d,m,h,v=nt(t[1].value)+"";return{c(){n=f("strong"),r=f("button"),o=f("div"),i=p(v),a=p(" ⯅"),w(r,"id",s="input-"+t[0].name),w(r,"data-parameter-name",d=t[0].name),w(r,"class","input-popup")},m(e,s){u(e,n,s),l(n,r),l(r,o),l(o,i),l(r,a),m||(h=g(r,"click",t[5]),m=!0)},p(e,[t]){2&t&&v!==(v=nt(e[1].value)+"")&&E(i,v),1&t&&s!==(s="input-"+e[0].name)&&w(r,"id",s),1&t&&d!==(d=e[0].name)&&w(r,"data-parameter-name",d)},i:e,o:e,d(e){e&&c(n),m=!1,h()}}}function nt(e){return decodeURIComponent(e.substr(e.indexOf(" ")+1))}function rt(e,t,n){let{parameter:r}=t,{control:o}=t,{popup:i}=t,{onerror:a}=t,{onfix:s}=t;r.empty_string_is_null||(""!=o.value?s(r.name,r.highlight_fields):a(r.name,r.highlight_fields));return e.$$set=e=>{"parameter"in e&&n(0,r=e.parameter),"control"in e&&n(1,o=e.control),"popup"in e&&n(2,i=e.popup),"onerror"in e&&n(3,a=e.onerror),"onfix"in e&&n(4,s=e.onfix)},[r,o,i,a,s,()=>i(r.name)]}class ot extends ee{constructor(e){super(),K(this,e,rt,tt,i,{parameter:0,control:1,popup:2,onerror:3,onfix:4})}}function it(e,t,n){const r=e.slice();return r[18]=t[n],r}function at(e){let t,n,r=!e[1].hasOwnProperty("name"),o=!e[0]||!e[0].hasOwnProperty("value"),i=r&&st(),a=o&&lt(e);return{c(){i&&i.c(),t=m(),a&&a.c(),n=h()},m(e,r){i&&i.m(e,r),u(e,t,r),a&&a.m(e,r),u(e,n,r)},p(e,s){2&s&&(r=!e[1].hasOwnProperty("name")),r?i||(i=st(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),1&s&&(o=!e[0]||!e[0].hasOwnProperty("value")),o?a?a.p(e,s):(a=lt(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(e){i&&i.d(e),e&&c(t),a&&a.d(e),e&&c(n)}}}function st(e){let t;return{c(){t=f("div"),t.textContent="Parameter should have 'name'",w(t,"class","deverror")},m(e,n){u(e,t,n)},d(e){e&&c(t)}}}function lt(e){let t,n,r,o,i=e[1].name+"";return{c(){t=f("div"),n=p("Control for "),r=p(i),o=p(" should exist and have 'value'"),w(t,"class","deverror")},m(e,i){u(e,t,i),l(t,n),l(t,r),l(t,o)},p(e,t){2&t&&i!==(i=e[1].name+"")&&E(r,i)},d(e){e&&c(t)}}}function ut(t){let n,r,o,i=t[1].name+"";return{c(){n=f("strong"),r=p("$"),o=p(i)},m(e,t){u(e,n,t),l(n,r),l(n,o)},p(e,t){2&t&&i!==(i=e[1].name+"")&&E(o,i)},i:e,o:e,d(e){e&&c(n)}}}function ct(t){let n,r,o=t[0].value+"";return{c(){n=f("strong"),r=p(o)},m(e,t){u(e,n,t),l(n,r)},p(e,t){1&t&&o!==(o=e[0].value+"")&&E(r,o)},i:e,o:e,d(e){e&&c(n)}}}function dt(e){let t,n;return t=new et({props:{onfix:e[6],onerror:e[5],onfocus:e[3],onblur:e[4],control:e[0],parameter:e[1]}}),t.$on("newvalue",e[16]),{c(){V(t.$$.fragment)},m(e,r){X(t,e,r),n=!0},p(e,n){const r={};64&n&&(r.onfix=e[6]),32&n&&(r.onerror=e[5]),8&n&&(r.onfocus=e[3]),16&n&&(r.onblur=e[4]),1&n&&(r.control=e[0]),2&n&&(r.parameter=e[1]),t.$set(r)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function ft(e){let t,n;return t=new ot({props:{popup:e[2],onfix:e[6],onerror:e[5],control:e[0],parameter:e[1],"data-parameter-name":e[1].name}}),{c(){V(t.$$.fragment)},m(e,r){X(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.popup=e[2]),64&n&&(r.onfix=e[6]),32&n&&(r.onerror=e[5]),1&n&&(r.control=e[0]),2&n&&(r.parameter=e[1]),2&n&&(r["data-parameter-name"]=e[1].name),t.$set(r)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function pt(t){let n;function r(e,t){return e[0].options?bt:""+e[0].value!=""?Et:yt}let o=r(t),i=o(t);return{c(){i.c(),n=h()},m(e,t){i.m(e,t),u(e,n,t)},p(e,t){o===(o=r(e))&&i?i.p(e,t):(i.d(1),i=o(e),i&&(i.c(),i.m(n.parentNode,n)))},i:e,o:e,d(e){i.d(e),e&&c(n)}}}function mt(t){let n,r,o=t[1].name+"";return{c(){n=p("$"),r=p(o)},m(e,t){u(e,n,t),u(e,r,t)},p(e,t){2&t&&o!==(o=e[1].name+"")&&E(r,o)},i:e,o:e,d(e){e&&c(n),e&&c(r)}}}function ht(t){let n,i,a,s,l,d,p,m;return{c(){n=f("input"),w(n,"data-highlight-fields",i=JSON.stringify(t[1].highlight_fields)),w(n,"id",a="input-"+t[1].name),w(n,"step",s=ce(t[1].decimal_places)),w(n,"name",l=t[1].name),w(n,"type","number"),w(n,"data-parameter-name",d=t[1].name)},m(e,r){u(e,n,r),b(n,t[0].value),p||(m=[g(n,"focus",(function(){o(t[3])&&t[3].apply(this,arguments)})),g(n,"blur",(function(){o(t[4])&&t[4].apply(this,arguments)})),g(n,"input",t[14]),g(n,"change",t[7](t[10]))],p=!0)},p(e,r){t=e,2&r&&i!==(i=JSON.stringify(t[1].highlight_fields))&&w(n,"data-highlight-fields",i),2&r&&a!==(a="input-"+t[1].name)&&w(n,"id",a),2&r&&s!==(s=ce(t[1].decimal_places))&&w(n,"step",s),2&r&&l!==(l=t[1].name)&&w(n,"name",l),2&r&&d!==(d=t[1].name)&&w(n,"data-parameter-name",d),1&r&&y(n.value)!==t[0].value&&b(n,t[0].value)},i:e,o:e,d(e){e&&c(n),p=!1,r(m)}}}function gt(t){let n,i,a,s,l,d,p;return{c(){n=f("input"),w(n,"data-highlight-fields",i=JSON.stringify(t[1].highlight_fields)),w(n,"id",a="input-"+t[1].name),w(n,"name",s=t[1].name),w(n,"type","number"),w(n,"data-parameter-name",l=t[1].name)},m(e,r){u(e,n,r),b(n,t[0].value),d||(p=[g(n,"focus",(function(){o(t[3])&&t[3].apply(this,arguments)})),g(n,"blur",(function(){o(t[4])&&t[4].apply(this,arguments)})),g(n,"input",t[13]),g(n,"change",t[7](t[9]))],d=!0)},p(e,r){t=e,2&r&&i!==(i=JSON.stringify(t[1].highlight_fields))&&w(n,"data-highlight-fields",i),2&r&&a!==(a="input-"+t[1].name)&&w(n,"id",a),2&r&&s!==(s=t[1].name)&&w(n,"name",s),2&r&&l!==(l=t[1].name)&&w(n,"data-parameter-name",l),1&r&&y(n.value)!==t[0].value&&b(n,t[0].value)},i:e,o:e,d(e){e&&c(n),d=!1,r(p)}}}function vt(t){let n,i,a,s,l,d,p;return{c(){n=f("input"),w(n,"data-highlight-fields",i=JSON.stringify(t[1].highlight_fields)),w(n,"id",a="input-"+t[1].name),w(n,"name",s=t[1].name),w(n,"type","date"),w(n,"data-parameter-name",l=t[1].name)},m(e,r){u(e,n,r),b(n,t[0].value),d||(p=[g(n,"focus",(function(){o(t[3])&&t[3].apply(this,arguments)})),g(n,"blur",(function(){o(t[4])&&t[4].apply(this,arguments)})),g(n,"input",t[12]),g(n,"change",t[7](t[8]))],d=!0)},p(e,r){t=e,2&r&&i!==(i=JSON.stringify(t[1].highlight_fields))&&w(n,"data-highlight-fields",i),2&r&&a!==(a="input-"+t[1].name)&&w(n,"id",a),2&r&&s!==(s=t[1].name)&&w(n,"name",s),2&r&&l!==(l=t[1].name)&&w(n,"data-parameter-name",l),1&r&&b(n,t[0].value)},i:e,o:e,d(e){e&&c(n),d=!1,r(p)}}}function wt(t){let n,i,a,s,l,d,p;return{c(){n=f("input"),w(n,"data-highlight-fields",i=JSON.stringify(t[1].highlight_fields)),w(n,"id",a="input-"+t[1].name),w(n,"name",s=t[1].name),w(n,"data-parameter-name",l=t[1].name)},m(e,r){u(e,n,r),b(n,t[0].value),d||(p=[g(n,"focus",(function(){o(t[3])&&t[3].apply(this,arguments)})),g(n,"blur",(function(){o(t[4])&&t[4].apply(this,arguments)})),g(n,"input",t[11])],d=!0)},p(e,r){t=e,2&r&&i!==(i=JSON.stringify(t[1].highlight_fields))&&w(n,"data-highlight-fields",i),2&r&&a!==(a="input-"+t[1].name)&&w(n,"id",a),2&r&&s!==(s=t[1].name)&&w(n,"name",s),2&r&&l!==(l=t[1].name)&&w(n,"data-parameter-name",l),1&r&&n.value!==t[0].value&&b(n,t[0].value)},i:e,o:e,d(e){e&&c(n),d=!1,r(p)}}}function yt(e){let t,n,r,o=e[1].name+"";return{c(){t=f("strong"),n=p("$"),r=p(o)},m(e,o){u(e,t,o),l(t,n),l(t,r)},p(e,t){2&t&&o!==(o=e[1].name+"")&&E(r,o)},d(e){e&&c(t)}}}function Et(e){let t,n,r=e[0].value+"";return{c(){t=f("strong"),n=p(r)},m(e,r){u(e,t,r),l(t,n)},p(e,t){1&t&&r!==(r=e[0].value+"")&&E(n,r)},d(e){e&&c(t)}}}function bt(e){let t,n,i,a,s,p,m,v,y=e[1].empty_string_is_null&&Tt(),E=e[0].options,b=[];for(let t=0;t<E.length;t+=1)b[t]=St(it(e,E,t));return{c(){t=f("select"),y&&y.c(),n=h();for(let e=0;e<b.length;e+=1)b[e].c();w(t,"data-highlight-fields",i=JSON.stringify(e[1].highlight_fields)),w(t,"id",a="input-"+e[1].name),w(t,"name",s=e[1].name),w(t,"data-parameter-name",p=e[1].name),void 0===e[0].value&&A((()=>e[15].call(t)))},m(r,i){u(r,t,i),y&&y.m(t,null),l(t,n);for(let e=0;e<b.length;e+=1)b[e].m(t,null);S(t,e[0].value),m||(v=[g(t,"focus",(function(){o(e[3])&&e[3].apply(this,arguments)})),g(t,"blur",(function(){o(e[4])&&e[4].apply(this,arguments)})),g(t,"change",e[15])],m=!0)},p(r,o){if((e=r)[1].empty_string_is_null?y||(y=Tt(),y.c(),y.m(t,n)):y&&(y.d(1),y=null),1&o){let n;for(E=e[0].options,n=0;n<E.length;n+=1){const r=it(e,E,n);b[n]?b[n].p(r,o):(b[n]=St(r),b[n].c(),b[n].m(t,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=E.length}2&o&&i!==(i=JSON.stringify(e[1].highlight_fields))&&w(t,"data-highlight-fields",i),2&o&&a!==(a="input-"+e[1].name)&&w(t,"id",a),2&o&&s!==(s=e[1].name)&&w(t,"name",s),2&o&&p!==(p=e[1].name)&&w(t,"data-parameter-name",p),1&o&&S(t,e[0].value)},d(e){e&&c(t),y&&y.d(),d(b,e),m=!1,r(v)}}}function Tt(e){let t;return{c(){t=f("option"),t.__value="",t.value=t.__value},m(e,n){u(e,t,n)},d(e){e&&c(t)}}}function St(e){let t,n,r,o=e[18].display+"";return{c(){t=f("option"),n=p(o),t.__value=r=e[18].value,t.value=t.__value},m(e,r){u(e,t,r),l(t,n)},p(e,i){1&i&&o!==(o=e[18].display+"")&&E(n,o),1&i&&r!==(r=e[18].value)&&(t.__value=r,t.value=t.__value)},d(e){e&&c(t)}}}function _t(e){let t,n,r,o,i,a="server"!=e[1].type&&at(e);const s=[wt,vt,gt,ht,mt,pt,ft,dt,ct,ut],l=[];function d(e,t){return"string"==e[1].type?0:"date"==e[1].type?1:"integer"==e[1].type?2:"decimal"==e[1].type?3:"server"==e[1].type?4:"select"==e[1].type?5:"popup"==e[1].type?6:"datetime"==e[1].type?7:""+e[0].value!=""?8:9}return n=d(e),r=l[n]=s[n](e),{c(){a&&a.c(),t=m(),r.c(),o=h()},m(e,r){a&&a.m(e,r),u(e,t,r),l[n].m(e,r),u(e,o,r),i=!0},p(e,[i]){"server"!=e[1].type?a?a.p(e,i):(a=at(e),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null);let u=n;n=d(e),n===u?l[n].p(e,i):(H(),Q(l[u],1,1,(()=>{l[u]=null})),z(),r=l[n],r||(r=l[n]=s[n](e),r.c()),Y(r,1),r.m(o.parentNode,o))},i(e){i||(Y(r),i=!0)},o(e){Q(r),i=!1},d(e){a&&a.d(e),e&&c(t),l[n].d(e),e&&c(o)}}}function Ot(e,t,n){const r=x();let{parameter:o}=t,{control:i}=t,{popup:a}=t,{onfocus:s}=t,{onblur:l}=t,{onerror:u}=t,{onfix:c}=t;function d(e){return function(){if(!e(i.value))return u(o.name,o.highlight_fields);c(o.name,o.highlight_fields),r("newvalue",{name:o.name,control:i})}}function f(){return!(!o.empty_string_is_null||""!=i.value)||(""+i.value).match(/\d\d\d\d\-\d\d-\d\d/)}function p(){return!(!o.empty_string_is_null||""!=i.value)||""+parseInt(i.value)==i.value}function m(){return!(!o.empty_string_is_null||""!=i.value)||(""+i.value).match(/^-?(0|[1-9]\d*)(\.\d+)?$/)}return"integer"==o.type&&d(p)(),"decimal"==o.type&&d(m)(),"date"==o.type&&d(f)(),e.$$set=e=>{"parameter"in e&&n(1,o=e.parameter),"control"in e&&n(0,i=e.control),"popup"in e&&n(2,a=e.popup),"onfocus"in e&&n(3,s=e.onfocus),"onblur"in e&&n(4,l=e.onblur),"onerror"in e&&n(5,u=e.onerror),"onfix"in e&&n(6,c=e.onfix)},[i,o,a,s,l,u,c,d,f,p,m,function(){i.value=this.value,n(0,i)},function(){i.value=this.value,n(0,i)},function(){i.value=y(this.value),n(0,i)},function(){i.value=y(this.value),n(0,i)},function(){i.value=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,i)},function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}(e,t)}]}class Rt extends ee{constructor(e){super(),K(this,e,Ot,_t,i,{parameter:1,control:0,popup:2,onfocus:3,onblur:4,onerror:5,onfix:6})}}function $t(e,t,n){const r=e.slice();return r[3]=t[n],r}function Pt(e){let t,n,r,o=e[3].value+"";return{c(){t=f("span"),n=p(o),w(t,"class","field_highlight"),w(t,"data-field",r=e[3].value)},m(e,r){u(e,t,r),l(t,n)},p(e,i){3&i&&o!==(o=e[3].value+"")&&E(n,o),3&i&&r!==(r=e[3].value)&&w(t,"data-field",r)},d(e){e&&c(t)}}}function xt(e){let t,n,r=e[3].value+"";return{c(){t=f("span"),n=p(r)},m(e,r){u(e,t,r),l(t,n)},p(e,t){3&t&&r!==(r=e[3].value+"")&&E(n,r)},d(e){e&&c(t)}}}function It(e){let t;function n(e,t){return"String"==e[3].type?xt:Pt}let r=n(e),o=r(e);return{c(){o.c(),t=h()},m(e,n){o.m(e,n),u(e,t,n)},p(e,i){r===(r=n(e))&&o?o.p(e,i):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&c(t)}}}function Nt(t){let n,r=t[2](t[1],t[0]),o=[];for(let e=0;e<r.length;e+=1)o[e]=It($t(t,r,e));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();n=h()},m(e,t){for(let n=0;n<o.length;n+=1)o[n].m(e,t);u(e,n,t)},p(e,[t]){if(7&t){let i;for(r=e[2](e[1],e[0]),i=0;i<r.length;i+=1){const a=$t(e,r,i);o[i]?o[i].p(a,t):(o[i]=It(a),o[i].c(),o[i].m(n.parentNode,n))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:e,o:e,d(e){d(o,e),e&&c(n)}}}function kt(e,t,n){let{item:r}=t,{parameters:o}=t;return e.$$set=e=>{"item"in e&&n(0,r=e.item),"parameters"in e&&n(1,o=e.parameters)},[r,o,function(e,t){const n=Array.from(new Set(e.reduce(((e,{name:t,highlight_fields:n})=>e.concat(n||[t])),[])));return ae(se(n,t),t)}]}class Ct extends ee{constructor(e){super(),K(this,e,kt,Nt,i,{item:0,parameters:1})}}function Lt(e,t,n){const r=e.slice();return r[5]=t[n],r}function Dt(e){let t,n;return t=new pe({props:{link:e[5]}}),{c(){V(t.$$.fragment)},m(e,r){X(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.link=e[5]),t.$set(r)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function At(e){let t,n,r=e[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=Dt(Lt(e,r,t));const i=e=>Q(o[e],1,1,(()=>{o[e]=null}));return{c(){t=f("div");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"id","main_links")},m(e,r){u(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,[n]){if(1&n){let a;for(r=e[0],a=0;a<r.length;a+=1){const i=Lt(e,r,a);o[a]?(o[a].p(i,n),Y(o[a],1)):(o[a]=Dt(i),o[a].c(),Y(o[a],1),o[a].m(t,null))}for(H(),a=r.length;a<o.length;a+=1)i(a);z()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Y(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Q(o[e]);n=!1},d(e){e&&c(t),d(o,e)}}}function Ut(e,t,n){let{links:r}=t,{controls:o}=t,{result:i}=t,a=[],s=[];return e.$$set=e=>{"links"in e&&n(1,r=e.links),"controls"in e&&n(2,o=e.controls),"result"in e&&n(3,i=e.result)},e.$$.update=()=>{var t,l;12&e.$$.dirty&&n(4,a=(l=o||{},Object.getOwnPropertyNames(l||{}).map((e=>({name:e,val:l[e].value})))).concat((t=i)&&t.rows&&t.rows.length?t.fields.map(((e,n)=>({name:e.name,val:t.rows[0][n]}))):[])),18&e.$$.dirty&&n(0,s=(r||[]).reduce(((e,t)=>{try{return e.concat([Ee(Te(a.map((({name:e})=>e)),t),be(a.map((({name:e})=>e)),[],a))])}catch(t){return e}}),[]))},[s,r,o,i]}class Mt extends ee{constructor(e){super(),K(this,e,Ut,At,i,{links:1,controls:2,result:3})}}function Ft(e,t,n){const r=e.slice();return r[30]=t[n],r}function qt(e,t,n){const r=e.slice();return r[39]=t[n],r[40]=t,r[41]=n,r}function jt(e,t,n){const r=e.slice();return r[36]=t[n],r[37]=t,r[38]=n,r}function Wt(e,t,n){const r=e.slice();return r[33]=t[n],r}function Bt(e,t,n){const r=e.slice();return r[36]=t[n],r}function Ht(e){let t,n,r,o,i,a,s,d=e[36].title+"";return{c(){t=f("li"),n=f("a"),r=p(d),i=m(),w(n,"href",o="#/"+e[36].name)},m(o,c){u(o,t,c),l(t,n),l(n,r),l(t,i),a||(s=g(n,"click",e[15]),a=!0)},p(e,t){4096&t[0]&&d!==(d=e[36].title+"")&&E(r,d),4096&t[0]&&o!==(o="#/"+e[36].name)&&w(n,"href",o)},d(e){e&&c(t),a=!1,s()}}}function zt(e){let t,n,i,a,s,d,y,b,S,_,O,R,$,P,x,I,N,k,C,L,D,A,U,M,F,q,j,W,B,J,V,X,G,Z,K,ee,te,ne,re,oe,ie,ae=e[12].definition.title+"",se=(e[12].definition.statement_type||"EXECUTE")+"",le=!e[12].asPopup&&Qt(e);const ue=[Vt,Jt],ce=[];function de(e,t){return e[12].showingSql?0:1}D=de(e),A=ce[D]=ue[D](e);let fe=e[12].asPopup&&an(e),pe=e[12].asPopup&&sn(e),me=e[12].showingDownload&&ln(e),he=!e[12].asPopup&&mn(e);return{c(){t=f("div"),t.innerHTML='<div class="column col-auto" style="margin: 3rem auto 0 auto"><div class="toast toast-error"><button class="btn btn-clear float-right" onclick="esqlateHideToastError()"></button> \n          <div id="toast-error-wrapper-text" style="padding: 1em">xx</div></div></div>',n=m(),le&&le.c(),i=m(),a=f("div"),s=f("a"),s.textContent=" ",d=m(),y=f("div"),b=f("div"),S=f("div"),_=f("div"),O=f("div"),R=f("div"),$=f("h3"),P=p(ae),x=f("div"),x.innerHTML='<span id="color-finder-error" class="text-error"></span>a<span id="color-finder-warning" class="text-warning">b</span><span id="color-finder-success" class="text-success">c</span>',I=m(),N=f("div"),k=f("a"),k.textContent="⚙",C=m(),L=f("div"),A.c(),U=m(),M=f("div"),F=f("div"),q=f("div"),j=f("div"),fe&&fe.c(),W=m(),B=f("button"),J=p(se),X=m(),pe&&pe.c(),ee=m(),me&&me.c(),te=m(),he&&he.c(),ne=h(),w(t,"class","columns"),w(t,"id","toast-error-wrapper"),T(t,"display","none"),w(s,"href","#close"),w(s,"class","modal-overlay"),w(s,"aria-label","Close"),w(x,"id","color-finder"),T(x,"display","none"),w(R,"class","column col-9"),T(k,"text-decoration","none"),T(k,"float","right"),T(k,"font-size","200%"),w(k,"href","#close"),w(N,"class","column col-3"),w(O,"class","columns"),w(_,"class","container"),w(S,"class","modal-header"),w(L,"class","modal-body"),T(L,"overflow","unset"),w(B,"class",V="btn btn-primary "+yn(e[12].definition.statement_type)),w(j,"class","column col-12"),w(q,"class","col-gapless columns"),w(F,"class","container"),w(M,"class","modal-footer"),w(b,"class","column col-auto modal-container code-popup"),T(b,"margin","auto"),w(y,"class","columns"),w(y,"style",G=e[12].asPopup?"":"margin-top: 2rem"),w(a,"class",Z=e[12].asPopup?"modal active in-popup":"no-modal"),w(a,"style",K=e[12].statement.length?"":"display: none")},m(r,c){u(r,t,c),u(r,n,c),le&&le.m(r,c),u(r,i,c),u(r,a,c),l(a,s),l(a,d),l(a,y),l(y,b),l(b,S),l(S,_),l(_,O),l(O,R),l(R,$),l($,P),l(R,x),l(O,I),l(O,N),l(N,k),l(b,C),l(b,L),ce[D].m(L,null),l(b,U),l(b,M),l(M,F),l(F,q),l(q,j),fe&&fe.m(j,null),l(j,W),l(j,B),l(B,J),l(b,X),pe&&pe.m(b,null),u(r,ee,c),me&&me.m(r,c),u(r,te,c),he&&he.m(r,c),u(r,ne,c),re=!0,oe||(ie=[g(s,"click",v((function(){o(e[3])&&e[3].apply(this,arguments)}))),g(k,"click",v(e[16])),g(B,"click",(function(){o(e[1])&&e[1].apply(this,arguments)}))],oe=!0)},p(t,n){(e=t)[12].asPopup?le&&(H(),Q(le,1,1,(()=>{le=null})),z()):le?(le.p(e,n),4096&n[0]&&Y(le,1)):(le=Qt(e),le.c(),Y(le,1),le.m(i.parentNode,i)),(!re||4096&n[0])&&ae!==(ae=e[12].definition.title+"")&&E(P,ae);let r=D;D=de(e),D===r?ce[D].p(e,n):(H(),Q(ce[r],1,1,(()=>{ce[r]=null})),z(),A=ce[D],A||(A=ce[D]=ue[D](e),A.c()),Y(A,1),A.m(L,null)),e[12].asPopup?fe?fe.p(e,n):(fe=an(e),fe.c(),fe.m(j,W)):fe&&(fe.d(1),fe=null),(!re||4096&n[0])&&se!==(se=(e[12].definition.statement_type||"EXECUTE")+"")&&E(J,se),(!re||4096&n[0]&&V!==(V="btn btn-primary "+yn(e[12].definition.statement_type)))&&w(B,"class",V),e[12].asPopup?pe?(pe.p(e,n),4096&n[0]&&Y(pe,1)):(pe=sn(e),pe.c(),Y(pe,1),pe.m(b,null)):pe&&(H(),Q(pe,1,1,(()=>{pe=null})),z()),(!re||4096&n[0]&&G!==(G=e[12].asPopup?"":"margin-top: 2rem"))&&w(y,"style",G),(!re||4096&n[0]&&Z!==(Z=e[12].asPopup?"modal active in-popup":"no-modal"))&&w(a,"class",Z),(!re||4096&n[0]&&K!==(K=e[12].statement.length?"":"display: none"))&&w(a,"style",K),e[12].showingDownload?me?me.p(e,n):(me=ln(e),me.c(),me.m(te.parentNode,te)):me&&(me.d(1),me=null),e[12].asPopup?he&&(H(),Q(he,1,1,(()=>{he=null})),z()):he?(he.p(e,n),4096&n[0]&&Y(he,1)):(he=mn(e),he.c(),Y(he,1),he.m(ne.parentNode,ne))},i(e){re||(Y(le),Y(A),Y(pe),Y(he),re=!0)},o(e){Q(le),Q(A),Q(pe),Q(he),re=!1},d(e){e&&c(t),e&&c(n),le&&le.d(e),e&&c(i),e&&c(a),ce[D].d(),fe&&fe.d(),pe&&pe.d(),e&&c(ee),me&&me.d(e),e&&c(te),he&&he.d(e),e&&c(ne),oe=!1,r(ie)}}}function Yt(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="column col-auto" style="margin: 3rem auto 0 auto; max-width: 40%"><div class="columns" id="toast-error-wrapper" style="display:none"><div class="column col-auto" style="margin: 3rem auto 3rem auto"><div class="toast toast-error"><button class="btn btn-clear float-right" onclick="esqlateHideToastError()"></button> \n                <div id="toast-error-wrapper-text" style="padding: 1em">xx</div></div></div></div> \n          <h2>Welcome to eSQLate.</h2> \n          <p>This tool enables you to create simple administration panels by writing SQL queries within a simple JSON document.</p></div>',w(n,"class","columns")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&c(n)}}}function Qt(e){let t,n;return t=new Mt({props:{links:e[12].definition.top_links,controls:e[12].controls,result:e[12].result}}),{c(){V(t.$$.fragment)},m(e,r){X(t,e,r),n=!0},p(e,n){const r={};4096&n[0]&&(r.links=e[12].definition.top_links),4096&n[0]&&(r.controls=e[12].controls),4096&n[0]&&(r.result=e[12].result),t.$set(r)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Jt(e){let t,n,r,o,i,a=e[12].definition.description&&Xt(e),s=e[12].definition.parameters.filter(bn(e[12].controls)),p=[];for(let t=0;t<s.length;t+=1)p[t]=Kt(qt(e,s,t));const h=e=>Q(p[e],1,1,(()=>{p[e]=null}));return{c(){t=f("div"),n=f("div"),a&&a.c(),r=m(),o=f("div");for(let e=0;e<p.length;e+=1)p[e].c();w(n,"class","column-12"),w(n,"id","code-input-area"),w(t,"class","col-gapless columns code-description"),w(o,"class","form-horizontal code-form")},m(e,s){u(e,t,s),l(t,n),a&&a.m(n,null),u(e,r,s),u(e,o,s);for(let e=0;e<p.length;e+=1)p[e].m(o,null);i=!0},p(e,t){if(e[12].definition.description?a?a.p(e,t):(a=Xt(e),a.c(),a.m(n,null)):a&&(a.d(1),a=null),1839136&t[0]){let n;for(s=e[12].definition.parameters.filter(bn(e[12].controls)),n=0;n<s.length;n+=1){const r=qt(e,s,n);p[n]?(p[n].p(r,t),Y(p[n],1)):(p[n]=Kt(r),p[n].c(),Y(p[n],1),p[n].m(o,null))}for(H(),n=s.length;n<p.length;n+=1)h(n);z()}},i(e){if(!i){for(let e=0;e<s.length;e+=1)Y(p[e]);i=!0}},o(e){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)Q(p[e]);i=!1},d(e){e&&c(t),a&&a.d(),e&&c(r),e&&c(o),d(p,e)}}}function Vt(e){let t,n,r,o,i,a,s,p=e[12].definition.description&&en(e),h=e[12].statement,g=[];for(let t=0;t<h.length;t+=1)g[t]=on(Wt(e,h,t));const v=e=>Q(g[e],1,1,(()=>{g[e]=null}));return{c(){t=f("div"),n=f("div"),r=f("div"),p&&p.c(),o=m(),i=f("div"),a=f("div");for(let e=0;e<g.length;e+=1)g[e].c();w(r,"class","column-12"),w(r,"id","code-description-area"),w(n,"class","col-gapless columns"),w(a,"class","code-code column col-12"),w(a,"id","code-input-area"),w(i,"class","col-gapless columns"),w(t,"class","container")},m(e,c){u(e,t,c),l(t,n),l(n,r),p&&p.m(r,null),l(t,o),l(t,i),l(i,a);for(let e=0;e<g.length;e+=1)g[e].m(a,null);s=!0},p(e,t){if(e[12].definition.description?p?p.p(e,t):(p=en(e),p.c(),p.m(r,null)):p&&(p.d(1),p=null),1839136&t[0]){let n;for(h=e[12].statement,n=0;n<h.length;n+=1){const r=Wt(e,h,n);g[n]?(g[n].p(r,t),Y(g[n],1)):(g[n]=on(r),g[n].c(),Y(g[n],1),g[n].m(a,null))}for(H(),n=h.length;n<g.length;n+=1)v(n);z()}},i(e){if(!s){for(let e=0;e<h.length;e+=1)Y(g[e]);s=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)Q(g[e]);s=!1},d(e){e&&c(t),p&&p.d(),d(g,e)}}}function Xt(e){let t,n=e[13].render(""+e[12].definition.description)+"";return{c(){t=f("div")},m(e,r){u(e,t,r),t.innerHTML=n},p(e,r){4096&r[0]&&n!==(n=e[13].render(""+e[12].definition.description)+"")&&(t.innerHTML=n)},d(e){e&&c(t)}}}function Gt(e){let t,n,r;function o(t){e[25].call(null,t,e[39])}let i={onfix:e[19],onerror:e[18],onfocus:vn,onblur:wn,popup:e[5],parameter:e[39]};return void 0!==e[12].controls[e[39].name]&&(i.control=e[12].controls[e[39].name]),t=new Rt({props:i}),N.push((()=>J(t,"control",o))),t.$on("newvalue",e[20]),{c(){V(t.$$.fragment)},m(e,n){X(t,e,n),r=!0},p(r,o){e=r;const i={};32&o[0]&&(i.popup=e[5]),4096&o[0]&&(i.parameter=e[39]),!n&&4096&o[0]&&(n=!0,i.control=e[12].controls[e[39].name],U((()=>n=!1))),t.$set(i)},i(e){r||(Y(t.$$.fragment,e),r=!0)},o(e){Q(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function Zt(e){let t,n,r,o,i;function a(t){e[24].call(null,t,e[39])}let s={onfix:e[19],onerror:e[18],onfocus:vn,onblur:wn,popup:e[5],parameter:e[39]};return void 0!==e[12].controls[e[39].name]&&(s.control=e[12].controls[e[39].name]),n=new Rt({props:s}),N.push((()=>J(n,"control",a))),n.$on("newvalue",e[20]),{c(){t=f("label"),V(n.$$.fragment),w(t,"class","form-label"),w(t,"for",o="input-"+e[39].name)},m(e,r){u(e,t,r),X(n,t,null),i=!0},p(a,s){e=a;const l={};32&s[0]&&(l.popup=e[5]),4096&s[0]&&(l.parameter=e[39]),!r&&4096&s[0]&&(r=!0,l.control=e[12].controls[e[39].name],U((()=>r=!1))),n.$set(l),(!i||4096&s[0]&&o!==(o="input-"+e[39].name))&&w(t,"for",o)},i(e){i||(Y(n.$$.fragment,e),i=!0)},o(e){Q(n.$$.fragment,e),i=!1},d(e){e&&c(t),G(n)}}}function Kt(e){let t,n,r,o,i,a,s,d,h,g,v,y=e[39].name+"";const b=[Zt,Gt],T=[];function S(e,t){return"static"==e[39].type?0:1}return d=S(e),h=T[d]=b[d](e),{c(){t=f("div"),n=f("div"),r=f("label"),o=p(y),a=m(),s=f("div"),h.c(),g=m(),w(r,"class","form-label"),w(r,"for",i="input-"+e[39].name),w(n,"class","column col-5 col-sm-12"),w(s,"class","column col-7 col-sm-12"),w(t,"class","form-group")},m(e,i){u(e,t,i),l(t,n),l(n,r),l(r,o),l(t,a),l(t,s),T[d].m(s,null),l(t,g),v=!0},p(e,t){(!v||4096&t[0])&&y!==(y=e[39].name+"")&&E(o,y),(!v||4096&t[0]&&i!==(i="input-"+e[39].name))&&w(r,"for",i);let n=d;d=S(e),d===n?T[d].p(e,t):(H(),Q(T[n],1,1,(()=>{T[n]=null})),z(),h=T[d],h||(h=T[d]=b[d](e),h.c()),Y(h,1),h.m(s,null))},i(e){v||(Y(h),v=!0)},o(e){Q(h),v=!1},d(e){e&&c(t),T[d].d()}}}function en(e){let t,n=e[13].render(""+e[12].definition.description)+"";return{c(){t=f("div")},m(e,r){u(e,t,r),t.innerHTML=n},p(e,r){4096&r[0]&&n!==(n=e[13].render(""+e[12].definition.description)+"")&&(t.innerHTML=n)},d(e){e&&c(t)}}}function tn(e){let t,n,r;function o(t){e[23].call(null,t,e[36])}let i={onfix:e[19],onerror:e[18],onfocus:vn,onblur:wn,popup:e[5],parameter:e[36]};return void 0!==e[12].controls[e[36].name]&&(i.control=e[12].controls[e[36].name]),t=new Rt({props:i}),N.push((()=>J(t,"control",o))),t.$on("newvalue",e[20]),{c(){V(t.$$.fragment)},m(e,n){X(t,e,n),r=!0},p(r,o){e=r;const i={};32&o[0]&&(i.popup=e[5]),4096&o[0]&&(i.parameter=e[36]),!n&&4096&o[0]&&(n=!0,i.control=e[12].controls[e[36].name],U((()=>n=!1))),t.$set(i)},i(e){r||(Y(t.$$.fragment,e),r=!0)},o(e){Q(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function nn(e){let t,n;return t=new Ct({props:{parameters:e[12].definition.parameters,item:e[36]}}),{c(){V(t.$$.fragment)},m(e,r){X(t,e,r),n=!0},p(e,n){const r={};4096&n[0]&&(r.parameters=e[12].definition.parameters),4096&n[0]&&(r.item=e[36]),t.$set(r)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function rn(e){let t,n,r,o;const i=[nn,tn],a=[];function s(e,t){return"string"==typeof e[36]?0:1}return t=s(e),n=a[t]=i[t](e),{c(){n.c(),r=h()},m(e,n){a[t].m(e,n),u(e,r,n),o=!0},p(e,o){let l=t;t=s(e),t===l?a[t].p(e,o):(H(),Q(a[l],1,1,(()=>{a[l]=null})),z(),n=a[t],n||(n=a[t]=i[t](e),n.c()),Y(n,1),n.m(r.parentNode,r))},i(e){o||(Y(n),o=!0)},o(e){Q(n),o=!1},d(e){a[t].d(e),e&&c(r)}}}function on(e){let t,n,r,o=e[33],i=[];for(let t=0;t<o.length;t+=1)i[t]=rn(jt(e,o,t));const a=e=>Q(i[e],1,1,(()=>{i[e]=null}));return{c(){t=f("div");for(let e=0;e<i.length;e+=1)i[e].c();n=m(),w(t,"class","line")},m(e,o){u(e,t,o);for(let e=0;e<i.length;e+=1)i[e].m(t,null);l(t,n),r=!0},p(e,r){if(1839136&r[0]){let s;for(o=e[33],s=0;s<o.length;s+=1){const a=jt(e,o,s);i[s]?(i[s].p(a,r),Y(i[s],1)):(i[s]=rn(a),i[s].c(),Y(i[s],1),i[s].m(t,n))}for(H(),s=o.length;s<i.length;s+=1)a(s);z()}},i(e){if(!r){for(let e=0;e<o.length;e+=1)Y(i[e]);r=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Q(i[e]);r=!1},d(e){e&&c(t),d(i,e)}}}function an(e){let t,n,i,a,s;return{c(){t=f("button"),t.textContent="Cancel",n=m(),i=f("button"),i.textContent="Select Empty Value",w(t,"class","btn btn-link"),w(i,"class","btn")},m(r,l){u(r,t,l),u(r,n,l),u(r,i,l),a||(s=[g(t,"click",(function(){o(e[3])&&e[3].apply(this,arguments)})),g(i,"click",(function(){o(e[4])&&e[4].apply(this,arguments)}))],a=!0)},p(t,n){e=t},d(e){e&&c(t),e&&c(n),e&&c(i),a=!1,r(s)}}}function sn(e){let t,n,r;return n=new Ge({props:{controls:e[12].controls,pick:e[0],inPopup:!0,definition:e[12].definition,result:e[12].result}}),{c(){t=f("div"),V(n.$$.fragment),w(t,"class","modal-body")},m(e,o){u(e,t,o),X(n,t,null),r=!0},p(e,t){const r={};4096&t[0]&&(r.controls=e[12].controls),1&t[0]&&(r.pick=e[0]),4096&t[0]&&(r.definition=e[12].definition),4096&t[0]&&(r.result=e[12].result),n.$set(r)},i(e){r||(Y(n.$$.fragment,e),r=!0)},o(e){Q(n.$$.fragment,e),r=!1},d(e){e&&c(t),G(n)}}}function ln(e){let t,n,i,a,s,d,p,h,y,E,b,S,_,O,R,$,P,x;function I(e,t){return(null==y||4096&t[0])&&(y=!!En(e[12].result).length),y?cn:un}let N=I(e,[-1]),k=N(e);function C(e,t){return(null==_||4096&t[0])&&(_=!!En(e[12].result).length),_?fn:dn}let L=C(e,[-1]),D=L(e);return{c(){t=f("div"),n=f("a"),n.textContent=" ",i=m(),a=f("div"),s=f("div"),d=f("a"),d.textContent=" ",p=m(),h=f("div"),k.c(),E=m(),b=f("div"),S=f("div"),D.c(),O=m(),R=f("div"),$=f("a"),$.textContent="Cancel",w(n,"href","#close"),w(n,"class","modal-overlay"),w(n,"aria-label","Close"),w(d,"href","#close"),w(d,"class","btn btn-clear float-right"),w(d,"aria-label","Close"),w(h,"class","modal-title h5"),w(s,"class","modal-header"),w(S,"class","content"),T(S,"min-height","2rem"),w(b,"class","modal-body"),w($,"href","#close"),w($,"aria-label","Close"),w(R,"class","modal-footer"),w(a,"class","modal-container"),w(t,"class","modal active"),w(t,"id","modal-id")},m(r,c){u(r,t,c),l(t,n),l(t,i),l(t,a),l(a,s),l(s,d),l(s,p),l(s,h),k.m(h,null),l(a,E),l(a,b),l(b,S),D.m(S,null),l(a,O),l(a,R),l(R,$),P||(x=[g(n,"click",v((function(){o(e[2])&&e[2].apply(this,arguments)}))),g(d,"click",v((function(){o(e[2])&&e[2].apply(this,arguments)}))),g($,"click",v((function(){o(e[2])&&e[2].apply(this,arguments)})))],P=!0)},p(t,n){N!==(N=I(e=t,n))&&(k.d(1),k=N(e),k&&(k.c(),k.m(h,null))),L===(L=C(e,n))&&D?D.p(e,n):(D.d(1),D=L(e),D&&(D.c(),D.m(S,null)))},d(e){e&&c(t),k.d(),D.d(),P=!1,r(x)}}}function un(e){let t;return{c(){t=p("Preparing downloads")},m(e,n){u(e,t,n)},d(e){e&&c(t)}}}function cn(e){let t;return{c(){t=p("Please select a download")},m(e,n){u(e,t,n)},d(e){e&&c(t)}}}function dn(t){let n;return{c(){n=f("div"),n.textContent="🕓",T(n,"text-align","center"),T(n,"font-size","144pt")},m(e,t){u(e,n,t)},p:e,d(e){e&&c(n)}}}function fn(e){let t,n=En(e[12].result),r=[];for(let t=0;t<n.length;t+=1)r[t]=pn(Ft(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=h()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);u(e,t,n)},p(e,o){if(2101248&o[0]){let i;for(n=En(e[12].result),i=0;i<n.length;i+=1){const a=Ft(e,n,i);r[i]?r[i].p(a,o):(r[i]=pn(a),r[i].c(),r[i].m(t.parentNode,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(e){d(r,e),e&&c(t)}}}function pn(e){let t,n,r,i,a=e[30].type+"";return{c(){t=f("a"),n=p(a),w(t,"href","#download")},m(a,s){u(a,t,s),l(t,n),r||(i=g(t,"click",v((function(){o(e[21](e[30].type))&&e[21](e[30].type).apply(this,arguments)}))),r=!0)},p(t,r){e=t,4096&r[0]&&a!==(a=e[30].type+"")&&E(n,a)},d(e){e&&c(t),r=!1,i()}}}function mn(e){let t,n,r,o,i,a;return t=new Mt({props:{links:e[12].definition.links,controls:e[12].controls,result:e[12].result}}),o=new Ge({props:{showDownloads:e[7],controls:e[12].controls,inPopup:!1,definition:e[12].definition,result:e[12].result}}),{c(){V(t.$$.fragment),n=m(),r=f("div"),V(o.$$.fragment),T(r,"margin-top","3em"),w(r,"class",i=e[12].asPopup?"in-popup":"")},m(e,i){X(t,e,i),u(e,n,i),u(e,r,i),X(o,r,null),a=!0},p(e,n){const s={};4096&n[0]&&(s.links=e[12].definition.links),4096&n[0]&&(s.controls=e[12].controls),4096&n[0]&&(s.result=e[12].result),t.$set(s);const l={};128&n[0]&&(l.showDownloads=e[7]),4096&n[0]&&(l.controls=e[12].controls),4096&n[0]&&(l.definition=e[12].definition),4096&n[0]&&(l.result=e[12].result),o.$set(l),(!a||4096&n[0]&&i!==(i=e[12].asPopup?"in-popup":""))&&w(r,"class",i)},i(e){a||(Y(t.$$.fragment,e),Y(o.$$.fragment,e),a=!0)},o(e){Q(t.$$.fragment,e),Q(o.$$.fragment,e),a=!1},d(e){G(t,e),e&&c(n),e&&c(r),G(o)}}}function hn(e){let t,n,i,a,s,h,y,E,b,T,S,O,R,$,P,x,I,N,k,C,L,D,A,U,M,F,q,j,W,B,J,V,X,G,Z,K,ee,te,ne,re,oe,ie,ae,se,le,ue,ce,de,fe,pe,me,he=e[12].menu||[],ge=[];for(let t=0;t<he.length;t+=1)ge[t]=Ht(Bt(e,he,t));const ve=[Yt,zt],we=[];function ye(e,t){return e[12].showingMenu?0:1}return R=ye(e),$=we[R]=ve[R](e),{c(){t=f("div"),n=f("a"),n.textContent="☰",i=m(),a=f("div"),s=f("div"),s.textContent="eSQLate",h=m(),y=f("ul");for(let e=0;e<ge.length;e+=1)ge[e].c();b=m(),T=f("a"),T.textContent=" ",S=m(),O=f("div"),$.c(),P=m(),x=f("div"),I=f("div"),I.textContent="🕓",k=m(),C=f("div"),L=f("a"),D=m(),A=f("div"),U=f("div"),M=f("a"),F=m(),q=f("div"),q.textContent="Display Configuration",j=m(),W=f("div"),B=f("div"),J=f("div"),V=f("div"),X=f("div"),G=f("label"),Z=f("input"),ee=m(),te=f("i"),ne=p("SQL - Show the detail of the SQL to be executed (instead of just the field names / values)."),re=m(),oe=f("div"),ie=f("label"),ae=f("input"),le=m(),ue=f("i"),ce=p("Extended Display - Display result set as one row per field, useful for really wide result sets."),w(n,"class","off-canvas-toggle btn btn-link"),w(n,"href","#sidebar-id"),w(s,"id","logo"),w(y,"id","menu"),w(a,"id","sidebar-id"),w(a,"class",E=e[10]||e[12].showingMenu?"off-canvas-sidebar active":"off-canvas-sidebar"),w(T,"class","off-canvas-overlay"),w(T,"href","#close"),w(O,"class","off-canvas-content"),w(t,"class","off-canvas"),_(t,"showing-menu",e[12].showingMenu),_(t,"extended-display",e[12].showingExtendedDisplay),w(I,"id","loading-modal-content"),w(x,"class",N=e[12].loading?"modal active":"modal"),w(x,"id","loading-modal"),w(L,"href","#close"),w(L,"class","modal-overlay"),w(L,"aria-label","Close"),w(M,"href","#close"),w(M,"class","btn btn-clear float-right"),w(M,"aria-label","Close"),w(q,"class","modal-title h5"),w(U,"class","modal-header"),w(Z,"type","checkbox"),Z.checked=K=e[12].showingSql?"checked":"",w(te,"class","form-icon"),w(G,"class","form-switch"),w(X,"class","column col-12"),w(ae,"type","checkbox"),ae.checked=se=e[12].showingExtendedDisplay?"checked":"",w(ue,"class","form-icon"),w(ie,"class","form-switch"),w(oe,"class","column col-12"),w(V,"class","columns"),w(J,"class","container"),w(B,"class","content"),w(W,"class","modal-body"),w(A,"class","modal-container"),w(C,"class",de=e[11]?"modal active":"modal")},m(r,c){u(r,t,c),l(t,n),l(t,i),l(t,a),l(a,s),l(a,h),l(a,y);for(let e=0;e<ge.length;e+=1)ge[e].m(y,null);l(t,b),l(t,T),l(t,S),l(t,O),we[R].m(O,null),u(r,P,c),u(r,x,c),l(x,I),u(r,k,c),u(r,C,c),l(C,L),l(C,D),l(C,A),l(A,U),l(U,M),l(U,F),l(U,q),l(A,j),l(A,W),l(W,B),l(B,J),l(J,V),l(V,X),l(X,G),l(G,Z),l(G,ee),l(G,te),l(G,ne),l(V,re),l(V,oe),l(oe,ie),l(ie,ae),l(ie,le),l(ie,ue),l(ie,ce),fe=!0,pe||(me=[g(n,"click",v(e[14])),g(T,"click",v(e[15])),g(L,"click",v(e[17])),g(M,"click",v(e[17])),g(Z,"click",(function(){o(e[8])&&e[8].apply(this,arguments)})),g(ae,"click",(function(){o(e[9])&&e[9].apply(this,arguments)}))],pe=!0)},p(n,r){if(e=n,36864&r[0]){let t;for(he=e[12].menu||[],t=0;t<he.length;t+=1){const n=Bt(e,he,t);ge[t]?ge[t].p(n,r):(ge[t]=Ht(n),ge[t].c(),ge[t].m(y,null))}for(;t<ge.length;t+=1)ge[t].d(1);ge.length=he.length}(!fe||5120&r[0]&&E!==(E=e[10]||e[12].showingMenu?"off-canvas-sidebar active":"off-canvas-sidebar"))&&w(a,"class",E);let o=R;R=ye(e),R===o?we[R].p(e,r):(H(),Q(we[o],1,1,(()=>{we[o]=null})),z(),$=we[R],$||($=we[R]=ve[R](e),$.c()),Y($,1),$.m(O,null)),4096&r[0]&&_(t,"showing-menu",e[12].showingMenu),4096&r[0]&&_(t,"extended-display",e[12].showingExtendedDisplay),(!fe||4096&r[0]&&N!==(N=e[12].loading?"modal active":"modal"))&&w(x,"class",N),(!fe||4096&r[0]&&K!==(K=e[12].showingSql?"checked":""))&&(Z.checked=K),(!fe||4096&r[0]&&se!==(se=e[12].showingExtendedDisplay?"checked":""))&&(ae.checked=se),(!fe||2048&r[0]&&de!==(de=e[11]?"modal active":"modal"))&&w(C,"class",de)},i(e){fe||(Y($),fe=!0)},o(e){Q($),fe=!1},d(e){e&&c(t),d(ge,e),we[R].d(),e&&c(P),e&&c(x),e&&c(k),e&&c(C),pe=!1,r(me)}}}function gn(e){let t=document.getElementById(e);if(!t){const n=document.head||document.getElementsByTagName("head")[0];t=document.createElement("style"),t.id=e,n.appendChild(t)}for(;t.sheet.rules.length>0;)t.sheet.removeRule(0);return t.sheet}function vn({target:e}){const t=gn("onblur-onfocus-style");let n=JSON.parse(e&&e.dataset&&e.dataset.highlightFields||"[]");0==n.length&&(n=[e.name]),n.forEach((e=>{t.insertRule(`.field_highlight[data-field="${e}"] { font-weight: bold; color: black; }`)}))}function wn({target:e}){gn("onblur-onfocus-style")}function yn(e){switch(e){case"INSERT":case"DELETE":case"UPDATE":return"btn-error";case"SELECT":return"btn-success"}return""}function En(e){return e&&e.full_format_urls&&e.full_format_urls.length?e.full_format_urls:[]}function bn(e){return t=>e.hasOwnProperty(t.name)}function Tn(t,n,r){let o,i=e,l=()=>(i(),i=a(h,(e=>r(12,o=e))),h);t.$$.on_destroy.push((()=>i()));let{pick:u}=n,{run:c}=n,{cancelDownload:d}=n,{cancel:f}=n,{empty:p}=n,{popup:m}=n,{viewStore:h}=n;l();let{download:g}=n,{showDownloads:v}=n,{toggleShowingSql:w}=n,{toggleShowingExtendedDisplay:y}=n,E=new Map;function b(e){if(E.has(e))return E.get(e);let t=Array.from(document.querySelectorAll("#color-finder-"+e)).reduce(((e,t)=>window.getComputedStyle(t).color),null);return null!=t&&E.set(e,t),t}let T=new window.markdownit,S=!1;let _=!1;let O=new Map;function R(){const e=gn("onerror"),t=new Set;for(const[n,r]of O){let o=!1;for(const i of r)t.add(i),o||(e.insertRule(`.input-popup[data-parameter-name="${n}"], input[data-parameter-name="${n}"], select[data-parameter-name="${n}"] { border-color:${b("error")} !important; }`),o=!0)}for(const n of t)e.insertRule(`.field_highlight[data-field="${n}"] { color: ${b("error")} !important; }`)}return P((()=>{s(h).definition&&s(h).definition.title&&(window.document.title="eSQLate: "+s(h).definition.title),s(h).loading?setTimeout((()=>{s(h).loading&&document.getElementById("loading-modal").classList.add("loading-notification")}),250):document.getElementById("loading-modal").classList.remove("loading-notification")})),t.$$set=e=>{"pick"in e&&r(0,u=e.pick),"run"in e&&r(1,c=e.run),"cancelDownload"in e&&r(2,d=e.cancelDownload),"cancel"in e&&r(3,f=e.cancel),"empty"in e&&r(4,p=e.empty),"popup"in e&&r(5,m=e.popup),"viewStore"in e&&l(r(6,h=e.viewStore)),"download"in e&&r(22,g=e.download),"showDownloads"in e&&r(7,v=e.showDownloads),"toggleShowingSql"in e&&r(8,w=e.toggleShowingSql),"toggleShowingExtendedDisplay"in e&&r(9,y=e.toggleShowingExtendedDisplay)},[u,c,d,f,p,m,h,v,w,y,S,_,o,T,function(){r(10,S=!0)},function(){r(10,S=!1)},function(){r(11,_=!0)},function(){r(11,_=!1)},function(e,t){O.has(e)||O.set(e,new Set),(t||[e]).forEach((t=>{O.get(e).add(t)})),R()},function(e,t){(t||[e]).forEach((t=>{O.get(e)&&O.get(e).delete(t)})),R()},function({detail:{name:e,control:t}}){h.update((n=>({...n,controls:{...n.controls,[e]:{...t}}})))},function(e){return()=>g(e)},g,function(e,t){o.controls[t.name]=e,h.set(o)},function(e,t){o.controls[t.name]=e,h.set(o)},function(e,t){o.controls[t.name]=e,h.set(o)}]}var Sn=oe((function(e,t){function n(e,t,n,r,o){var i=n(),a=0,s=!1;return new Promise((function(l,u){function c(){i=n(),s=!0,a+=1;try{r().then((function(e){if(s=!1,e.complete)return t(d),l(e.value)})).catch((function(e){t(d),u(e)}))}catch(e){t(d),u(e)}}c();var d=e((function(){s||n()-i>o(a)&&c()}),10)}))}function r(e,t){return n(setInterval,clearTimeout,(function(){return(new Date).getTime()}),e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.waitForImpl=n,t.waitFor=r,t.default=r}));re(Sn);Sn.waitForImpl;var _n=Sn.waitFor,On=oe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getFullUrlFromResponseUrl=void 0,t.getFullUrlFromResponseUrl=function(e,t){try{return new URL(t).href}catch(e){}const n=new URL(e);if("//"==t.substring(0,2))return n.protocol+t;if("/"==t.substring(0,1))return e.replace(/\/$/,"")+t;throw new Error("Cannot handle location for: "+t)}}));re(On);var Rn=On.getFullUrlFromResponseUrl,$n=oe((function(e,t){var n,r,o,i=ne&&ne.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.externalInvoke=t.runningInWvLinewise=t.WvLinewise=t.RawWvLinewiseMock=t.RawWvLinewise=t.RESPONSE_TYPE=t.OUT_REQUEST_DESCRIPTOR=t.REQUEST_TYPE=void 0,function(e){e.EXIT="exit",e.STREAM_LIST="streamList",e.STREAM_START="streamStart",e.STREAM_CONTINUE="streamContinue",e.PARAMS="params",e.OUT="out"}(n=t.REQUEST_TYPE||(t.REQUEST_TYPE={})),function(e){e[e.STDOUT=1]="STDOUT",e[e.STDERR=2]="STDERR",e[e.DESCRIPTOR_3=3]="DESCRIPTOR_3",e[e.DESCRIPTOR_4=4]="DESCRIPTOR_4",e[e.DESCRIPTOR_5=5]="DESCRIPTOR_5",e[e.DESCRIPTOR_6=6]="DESCRIPTOR_6",e[e.DESCRIPTOR_7=7]="DESCRIPTOR_7",e[e.DESCRIPTOR_8=8]="DESCRIPTOR_8",e[e.DESCRIPTOR_9=9]="DESCRIPTOR_9"}(r=t.OUT_REQUEST_DESCRIPTOR||(t.OUT_REQUEST_DESCRIPTOR={})),function(e){e.PARAMS="params",e.LINE="line",e.STREAM_LIST="streamList",e.DETAILS="details",e.FINISHED="finished",e.PAUSED="paused",e.ERROR="error",e.MESSAGE_ERROR="messageError"}(o=t.RESPONSE_TYPE||(t.RESPONSE_TYPE={}));class a{constructor(e){this.external=e,this.respFnsOnce={error:[],messageError:[],params:[],streamList:[],paused:[],details:[],line:[],finished:[]},this.respFns={error:[],messageError:[],params:[],streamList:[],paused:[],details:[],line:[],finished:[]},"undefined"!=typeof window&&(window._globalWvLinewise=e=>this.fire(e))}getResponseDispatcher(e){let t=this.respFns[e];for(;this.respFnsOnce[e].length;)t=t.concat([this.respFnsOnce[e].shift()]);return t}fire(e){let t=this.getResponseDispatcher(e.type);if(t.length)for(let n=0;n<t.length;n++)t[n].call(null,e)}request(e){this.external.invoke(JSON.stringify(e))}on(e,t){this.respFns[e].push(t)}once(e,t){this.respFnsOnce[e].push(t)}clear(e){this.respFns[e]=[],this.respFnsOnce[e]=[]}off(e,t){for(let n=this.respFns[e].length-1;n>=0;n--)this.respFns[e][n]==t&&this.respFns[e].splice(n,1);for(let n=this.respFnsOnce[e].length-1;n>=0;n--)this.respFnsOnce[e][n]==t&&this.respFnsOnce[e].splice(n,1)}}t.RawWvLinewise=a;t.RawWvLinewiseMock=class extends a{constructor(){super({invoke:e=>{}}),this.streamData=new Map,this.params=[],this.running=new Set,this.started=new Set,this.startedCounts=new Map}addStreamData(e,t){this.streamData.has(e)||this.streamData.set(e,[]),this.streamData.set(e,(this.streamData.get(e)||[]).concat(t))}addParam(e,t){this.params.push({name:e,value:t})}start(e,t){this.startedCounts.set(e,t),this.running.add(e),this.started.has(e)||(this.fire({name:e,rewindable:!1,type:o.DETAILS}),this.started.add(e));let n=this.streamData.get(e)||[],r=0;for(;r++<t&&n.length;){let t=n.shift();this.fire({name:e,data:t,type:o.LINE})}this.running.delete(e),n.length?this.fire({name:e,type:o.PAUSED}):this.fire({name:e,type:o.FINISHED})}request(e){return i(this,void 0,void 0,(function*(){switch(e.msg){case n.EXIT:window.document.body.innerText="EXIT DONE";break;case n.STREAM_LIST:this.fire({type:o.STREAM_LIST,streams:Array.from(this.streamData.keys())});break;case n.PARAMS:this.fire({type:o.PARAMS,params:this.params});break;case n.STREAM_CONTINUE:this.start(e.name,this.startedCounts.get(e.name)||0);break;case n.OUT:2==e.descriptor&&console.log("STDERR: "+e.data),1==e.descriptor&&console.log("STDOUT: "+e.data),e.descriptor>2&&e.descriptor<10&&console.log(`STD${e.descriptor}: ${e.data}`);break;case n.STREAM_START:if(!e.hasOwnProperty("name")||!e.hasOwnProperty("count"))return;if(!this.streamData.has(e.name))return void this.fire({name:e.name,error:"No such stream",type:o.ERROR});if(this.running.has(e.name)||!this.streamData.has(e.name))return;this.start(e.name,e.count)}}))}};t.WvLinewise=class{constructor(e){this.raw=e}streamStart(e,t){this.raw.request({msg:n.STREAM_START,name:e,count:t})}streamContinue(e){this.raw.request({msg:n.STREAM_CONTINUE,name:e})}requestParams(){this.raw.request({msg:n.PARAMS})}exit(e){this.raw.request({msg:n.EXIT,status:e})}requestStreamList(){this.raw.request({msg:n.STREAM_LIST})}out(e,t=r.STDOUT){this.raw.request({msg:n.OUT,descriptor:t,data:e})}on(e,t){this.raw.on(e,t)}once(e,t){this.raw.once(e,t)}clear(e){this.raw.clear(e)}off(e,t){this.raw.off(e,t)}},t.runningInWvLinewise=function(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.external&&window.webkit.messageHandlers.external.postMessage?(window.external={invoke:e=>{window.webkit.messageHandlers.external.postMessage(e)}},!0):!(!window.external||!window.external.invoke)},t.externalInvoke=function(e){if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.external&&window.webkit.messageHandlers.external.postMessage)return window.webkit.messageHandlers.external.postMessage(e);if(window.external&&window.external.invoke)return window.external.invoke(e);throw new Error("WV Linewise: Could not post message: "+JSON.stringify(e))}}));re($n);$n.externalInvoke,$n.runningInWvLinewise,$n.WvLinewise,$n.RawWvLinewiseMock,$n.RawWvLinewise,$n.RESPONSE_TYPE,$n.OUT_REQUEST_DESCRIPTOR,$n.REQUEST_TYPE;var Pn=oe((function(e,t){var n,r=ne&&ne.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WvLinewiseBuffer=void 0,function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Requesting=2]="Requesting",e[e.End=3]="End"}(n||(n={}));t.WvLinewiseBuffer=class{constructor(e,t,r,o){if(this.wvl=e,this.streamName=t,this.lowWaterMark=r,this.countToRequest=o,this.buffer=[],this.state=n.NotStarted,this.noSleep=!1,this.state=0,0==o)throw new Error("WvLinewiseBuffer: countToRequest must be a positive number");this.wvl.on($n.RESPONSE_TYPE.LINE,(({name:e,data:t})=>{e==this.streamName&&this.buffer.push(t)})),this.wvl.on($n.RESPONSE_TYPE.FINISHED,(()=>{this.state=3})),this.wvl.on($n.RESPONSE_TYPE.PAUSED,(()=>{this.state=1}))}notify(){return new Promise((e=>{let t=function(e){let t=!1;return function(...n){if(!t)return t=!0,e.apply(null,n)}}(e),n=({name:e,type:o})=>r(this,void 0,void 0,(function*(){if(e===this.streamName){if(o==$n.RESPONSE_TYPE.FINISHED&&(this.state=3),o==$n.RESPONSE_TYPE.PAUSED)return this.state=1,this.noSleep||(yield new Promise((e=>{setTimeout((()=>{e(null)}),1)}))),this.request();this.wvl.off($n.RESPONSE_TYPE.FINISHED,n),this.wvl.off($n.RESPONSE_TYPE.LINE,n),this.wvl.off($n.RESPONSE_TYPE.PAUSED,n),t()}}));this.wvl.on($n.RESPONSE_TYPE.FINISHED,n),this.wvl.on($n.RESPONSE_TYPE.LINE,n),this.wvl.on($n.RESPONSE_TYPE.PAUSED,n)}))}request(){this.state>=2||(0==this.state?(this.state=2,this.wvl.streamStart(this.streamName,this.countToRequest)):(this.state=2,this.wvl.streamContinue(this.streamName)))}shift(){return r(this,void 0,void 0,(function*(){let e=()=>{let e=this.buffer.length?this.buffer.shift():null;return void 0===e?null:e};return this.state<2&&this.buffer.length<=this.lowWaterMark&&this.request(),0==this.buffer.length?2==this.state?(yield this.notify(),e()):Promise.resolve(null):Promise.resolve(e())}))}}}));re(Pn);Pn.WvLinewiseBuffer;var xn=oe((function(e,t){var n=ne&&ne.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getWvLinewiseManagedFetch=t.getWvLinewiseFetch=t.WvLinewiseResponse=void 0;class r{append(e,t){throw new Error("Not Implemented")}delete(e){throw new Error("Not Implemented")}get(e){return this.hasOwnProperty(e)?this[e]:null}has(e){return this.hasOwnProperty(e)}set(e,t){throw new Error("Not Implemented")}forEach(e,t){let n=this;Object.getOwnPropertyNames(this).forEach((r=>{let o=n.get(r);"string"==typeof o&&e.call(t||n,o,r,n)}),{})}constructor(e){Object.getOwnPropertyNames(e).forEach((t=>{this[t]=e[t]}))}}class o{constructor(e,t,n,o){this.url=e,this.resp_text=t,this.status=n,this.redirected=!1,this.trailer=Promise.resolve(new r({})),this.type="basic",this.body=null,this.bodyUsed=!0,this.ok=n>=200&&n<300,this.statusText=this.getStatusText(n),this.headers=new r(o)}arrayBuffer(){throw new Error("WvLinewiseResponse: Unimplemented: arrayBuffer()")}blob(){throw new Error("WvLinewiseResponse: Unimplemented: blob()")}formData(){throw new Error("WvLinewiseResponse: Unimplemented: formData()")}clone(){let e={};return Object.getOwnPropertyNames(this.headers).forEach((t=>{e[t+""]=e[t]+""})),new o(this.url+"",this.resp_text+"",this.status,e)}json(){return JSON.parse(this.resp_text)}text(){return Promise.resolve(this.resp_text)}getStatusText(e){const t={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUESTED_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,UNPROCESSABLE_ENTITY:422,TOO_MANY_REQUESTS:429,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505};for(let[n,r]of Object.entries(t))if(r==e)return n;throw new Error("Status code "+e+" not expected")}}function i(e,t){let r=1,i=new Pn.WvLinewiseBuffer(e,t,16,32),a=1,s=[],l=new Map;const u=/^RESPONSE\: *([0-9]+)\: *([A-Z]{2,12})\:?/;function c(t,n){return e.out(m(p(t,n))),new Promise(((e,n)=>{s.push({resolve:e,reject:n,url:t})}))}function d(e){for(;e.length&&(" "==e[0]||"\t"==e[0]);)e=e.substr(1);return e}function f(e,t,n){if("END"==t)return Object.assign(Object.assign({},e),{end:!0,body:e.body||[],headers:e.headers||{}});if("STATUS"==t){e.hasOwnProperty("body")||(e.body=[]),n=d(n);let t=parseInt(n,10);if(isNaN(t))throw new Error(`wvLinewiseFetchParseLine: Id ${n} is not an integer`);return Object.assign(Object.assign({},e),{status:t})}if("BODY"==t)return e.hasOwnProperty("body")||(e.body=[]),Object.assign(Object.assign({},e),{body:[...e.body||[]].concat([n])});if("HEADERS"==t){let t=Object.assign({},e);t.headers=t.headers||{};let r={};try{r=JSON.parse(d(n))}catch(e){throw new Error(`wvLinewiseFetchParseLine: HEADERS supplied must be in JSON: '${n}'`)}for(let[e,n]of Object.entries(r))t.headers[""+e]=""+n;return t}throw new Error(`wvLinewiseFetchParseLine: Line not recognized: '${n}' '${t}'`)}function p(e,t){return{id:r++,url:e,opts:t}}function m(e){let t=(e.opts.method||"GET").toUpperCase();return`REQUEST: ${e.id}: ${t}: ${e.url} ${e.opts.body||"{}"}`}return c.request=p,c.serialize=m,c.process=function(){return n(this,void 0,void 0,(function*(){let e=yield i.shift();if(null===e)return!1;const{n:t,command:n,lineStripped:r}=function(e){const t=e.match(u);if(!t)throw new Error("wvLinewiseFetchParseLine: Invalid line: "+e);const n=parseInt(t[1],10);if(isNaN(n))throw new Error(`wvLinewiseFetchParseLine: Id ${e} is not an integer`);if(n<a||n>a+s.length)throw new Error(`wvLinewiseFetchParseLine: Id ${e} was not expected`);return{n:n,command:d(t[2]),lineStripped:e.substr(t[0].length)}}(e);let c=function(e){const t=l.get(e);if(t)return t;const n={id:e};return l.set(e,n),n}(t);if(c=f(c,n,r),c.end){let e=(c.id||0)-a,t=s[e];if(null===t)throw new Error(`wvLinewiseFetchProcess: The promise at index ${e} seems to have been already used!`);let n=t.resolve,r=t.url;for(s[e]=null;s.length&&null===s[0];)s.shift(),a+=1;let{body:i,status:u,headers:d}=c;n(new o(r,(i||[]).join("\n"),u||200,d||{})),l.delete(c.id)}return l.set(c.id,c),!0}))},c.parse=f,c.pendingCount=function(){return s.length},c}t.WvLinewiseResponse=o,t.getWvLinewiseFetch=i,t.getWvLinewiseManagedFetch=function(e,t,r){let o=i(e,t),a=!1,s=null,l=0;function u(){return n(this,void 0,void 0,(function*(){var e;(l=0,a)||(a=!0,1==(yield o.process())&&(l=0),yield(e=r(l),new Promise((t=>{setTimeout((()=>t(!0)),e)}))),l+=1,a=!1)}))}function c(){0==o.pendingCount()&&(s&&clearInterval(s),s=null)}function d(e,t){return n(this,void 0,void 0,(function*(){if(!s){let n=o(e,t);s=setInterval(u,10);let r=yield n;return c(),r}l=0;let n=yield o(e,t);return c(),n}))}return d.running=function(){return null!==s},d}}));re(xn);xn.getWvLinewiseManagedFetch,xn.getWvLinewiseFetch,xn.WvLinewiseResponse;var In=oe((function(e,t){var n=ne&&ne.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=ne&&ne.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r($n,t),r(Pn,t),r(xn,t)}));re(In);var Nn=oe((function(e,t){function n(){const e=document.querySelector("body").dataset.apiServer.replace(/\/$/,"");return e.match(/https?:/)?e:On.getFullUrlFromResponseUrl(window.location.origin,e)}function r(e,t){if(t.status<200||t.status>=300)throw new Error(`HTTP Request to ${e} returned status code `+t.status+" but I was expecting something in the 200 range");return t}function o(e,t){return t.then(r.bind(null,e)).then((e=>e.json())).then((t=>(s({method:"POST",url:e,body:t}),t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.consoleLog=t.errorHandler=t.postRequest=t.getRequest=t.getApiRoot=t.getURLSearchParams=void 0,t.getURLSearchParams=function(){return new URLSearchParams(window.location.hash.replace(/.*\?/,""))},t.getApiRoot=n;let i=new In.WvLinewise(new In.RawWvLinewise({invoke:In.externalInvoke})),a=In.getWvLinewiseManagedFetch(i,"IN",(()=>10));function s(e){if(In.runningInWvLinewise())return function(e){let t=document.querySelector("#fake-console");if(null===t){t=document.createElement("div");let e=document.createAttribute("id");e.value="fake-console",t.setAttributeNode(e),document.body.appendChild(t)}let n=document.createElement("div"),r=document.createTextNode(JSON.stringify(e));n.appendChild(r),t.appendChild(n),t.childNodes.length}(e);console.log(e)}t.getRequest=function(e){let t=fetch;return In.runningInWvLinewise()?o(e,a(e,{})):t(On.getFullUrlFromResponseUrl(n(),e),{mode:"cors",cache:"no-cache",headers:{"x-no-redirect":"1","Content-Type":"application/json"}}).then(r.bind(null,e)).then((e=>e.json()))},t.postRequest=function(e,t){if(In.runningInWvLinewise())return o(e,a(e,{method:"POST",body:JSON.stringify(t)}));const i=On.getFullUrlFromResponseUrl(n(),e),s={method:"POST",mode:"cors",cache:"no-cache",headers:{"x-no-redirect":"1","Content-Type":"application/json"},body:JSON.stringify(t)};return fetch(i,s).then(r.bind(null,e)).then((e=>e.json()))},t.errorHandler=function(e){s(e);let t=e;e.reason&&(e=e.reason),e.message&&(t=e.message);let n=document.getElementById("loading-modal");n&&n.classList.remove("active"),window.esqlateShowToastError&&window.esqlateShowToastError(t)||alert(t)},t.consoleLog=s}));re(Nn);var kn=Nn.consoleLog,Cn=Nn.errorHandler,Ln=Nn.postRequest,Dn=Nn.getRequest,An=Nn.getApiRoot,Un=Nn.getURLSearchParams,Mn=oe((function(e,t){var n=ne&&ne.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadResults=t.getLoadDefinition=t.getInitilizeControls=t.resultDemandHTTP=t.loadDefinitionHTTP=t.getInitialViewStore=void 0,t.getInitialViewStore=function(){return{showingSql:!0,showingMenu:!1,loading:!1,showingDownload:!1,definition:{description:"",name:"",parameters:[],links:[],row_links:[],statement:"",title:""},statement:[],result:!1,controls:{},asPopup:!1,menu:[]}},t.loadDefinitionHTTP=function(e){return n(this,void 0,void 0,(function*(){return yield Nn.getRequest("/definition/"+e)}))},t.resultDemandHTTP=function(e){return n(this,void 0,void 0,(function*(){return Nn.postRequest("/demand/"+e,{arguments:[]})}))},t.getInitilizeControls=function(e,t,r){return function(o){return n(this,void 0,void 0,(function*(){const n=o.definition,i=n.parameters.filter((e=>"select"==e.type)),a=yield Promise.all(i.map((e=>r(e.definition).then((t=>({parameter:e,result:t})))))),s=ve.getControlStore(ve.urlSearchParamsToArguments(t()),n.parameters,a),l=ge.newlineBreak(ge.normalize(n.parameters,"string"==typeof n.statement?ge.removeLineBeginningWhitespace(n.statement):n.statement));return e.update((e=>Object.assign(Object.assign({},e),{statement:l,controls:s}))),o}))}},t.getLoadDefinition=function(e,t){return function(r){return n(this,void 0,void 0,(function*(){const n=yield e(r.params.definitionName);return t.update((e=>Object.assign(Object.assign({},e),{showingMenu:!1,definition:n}))),Object.assign(Object.assign({},r),{definition:n})}))}},t.loadResults=function(e,t,r){return n(this,void 0,void 0,(function*(){function o(e){return r.indexOf(e)>-1}return t.result&&o(t.result.status)?Promise.resolve(Object.assign({},t)):Sn.waitFor((function(){return n(this,void 0,void 0,(function*(){const t=yield e();return o(t.status)?{complete:!0,value:t}:{complete:!1}}))}),(function(e){return 300*e})).then((e=>Object.assign(Object.assign({},t),{result:Object.assign(Object.assign({},t.result),e)})))}))}}));re(Mn);var Fn=Mn.loadResults,qn=Mn.getLoadDefinition,jn=Mn.getInitilizeControls,Wn=Mn.resultDemandHTTP,Bn=Mn.loadDefinitionHTTP,Hn=Mn.getInitialViewStore,zn=oe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.externalInvoke=t.runningInWvLinewise=void 0,t.runningInWvLinewise=function(){return In.runningInWvLinewise()},t.externalInvoke=function(e){return In.externalInvoke(e)}}));re(zn);zn.externalInvoke;var Yn=zn.runningInWvLinewise,Qn=re(oe((function(e,t){var n=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(Sn);t.default=function(e){var t=new Set,n=new Map,o=new Map;function i(e){return function(){return t.has(e)?Promise.resolve({complete:!1}):Promise.resolve({complete:!0,value:!0})}}return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var l=JSON.stringify(a);return n.has(l)?Promise.resolve(n.get(l)):t.has(l)?r.default(i(l),(function(e){return 50})).then((function(){if(n.has(l))return Promise.resolve(n.get(l));if(o.has(l))return Promise.reject(o.get(l));throw new Error("Esqlate Cache: WaitFor: Ended without success or error?")})):(t.add(l),e.apply(null,a).then((function(e){return n.set(l,e),t.delete(l),e})).catch((function(e){throw o.set(l,e),e})))}}})));function Jn(e,t){let n=[...t];return function(...t){return new Promise((r=>{let o=0;function i(t){e(t)}!function e(t){if(n.length&&o<n.length){const r=(0,n[o++])(t);return r&&r.then?r.then(e).catch(i):r}return r(t)}(t)}))}}var Vn=oe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.pick=t.getPopupLinkCreator=void 0,t.getPopupLinkCreator=function(e){return function(t,n,r){const o=n.name,i=n.parameters.reduce(((e,n)=>n.name==t?n:e));if(!i)throw new Error(`Could not find Select(name=${t})`);const a=ve.serializeValues(ve.addControlStoreToEsqlateQueryComponents(r,[])),s=encodeURIComponent(`/${encodeURIComponent(o)}?${a}`),l=ve.addBackValuesToControlStore(ve.urlSearchParamsToArguments(e()),{}),u=ve.pushBackToControlStore(l,{url:s,def:o,fld:i.name,val:i.value_field,dis:i.display_field}),c=ve.serializeValues(ve.addControlStoreToEsqlateQueryComponents(u,[]));return`/${encodeURIComponent(i.definition)}?${c}`}},t.pick=function(e,t,n,r=!1){const o=ve.popBackFromArguments(t);function i(e){return n.reduce(((t,n,r)=>n.name==e?r:t),-1)}const a=new URLSearchParams(o.url.replace(/.*\?/,"")),s=ve.urlSearchParamsToArguments(a).filter((e=>e.name!=o.fld)).concat([{name:o.fld,val:r?"":function(){const t=i(o.val),n=i(o.dis);if(-1==t)throw new Error("Return is a field that doesn't exist "+o.val);return encodeURIComponent(e[t])+" "+encodeURIComponent(e[n])}()}]),l=ve.serializeValues(ve.addControlStoreToEsqlateQueryComponents({},s));return`/${encodeURIComponent(o.def)}?${l}`}}));re(Vn);var Xn=Vn.pick,Gn=Vn.getPopupLinkCreator,Zn=oe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=void 0;let n={};t.getLocalStorage=function(){return In.runningInWvLinewise()?{getItem:function(e){return n[e]},setItem:function(e,t){n[e]=t}}:window.localStorage}}));re(Zn);var Kn=Zn.getLocalStorage;function er(e){return or.update((e=>({...e,result:!1}))),Promise.resolve(e)}function tr(e){return or.update((e=>({...e,asPopup:Oe(Un()).reduce(((e,t)=>"_burl0"==t.name||e),!1)}))),Promise.resolve(e)}function nr(e){return or.update((e=>({...e,loading:!1}))),Promise.resolve(e)}function rr(e){return or.update((e=>({...e,loading:!0}))),Promise.resolve(e)}window.onerror=Cn,window.onunhandledrejection=Cn;const or=function(t,n=e){let r;const o=[];function a(e){if(i(t,e)&&(t=e,r)){const e=!te.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),te.push(n,t)}if(e){for(let e=0;e<te.length;e+=2)te[e][0](te[e+1]);te.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(i,s=e){const l=[i,s];return o.push(l),1===o.length&&(r=n(a)||e),i(t),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}({...Hn(),showingSql:"false"!==Kn().getItem("showingSql"),showingExtendedDisplay:"true"===Kn().getItem("showingExtendedDisplay")}),ir=Qn(Bn),ar=Qn(Wn);Dn("/definition").then((e=>or.update((t=>({...t,menu:e})))));const sr=new class extends ee{constructor(e){super(),K(this,e,Tn,hn,i,{pick:0,run:1,cancelDownload:2,cancel:3,empty:4,popup:5,viewStore:6,download:22,showDownloads:7,toggleShowingSql:8,toggleShowingExtendedDisplay:9},[-1,-1])}}({target:document.body,props:{viewStore:or,toggleShowingSql:function(){or.update((e=>{const t=!e.showingSql;return Kn().setItem("showingSql",t),{...e,showingSql:t}}))},toggleShowingExtendedDisplay:function(){or.update((e=>{const t=!e.showingExtendedDisplay;return Kn().setItem("showingExtendedDisplay",t),{...e,showingExtendedDisplay:t}}))},run:function(){const e=s(or).definition.name,t=Se(_e(s(or).controls,Oe(Un()))),n=`/${encodeURIComponent(e)}/request?${t}`;ur.setRoute(n)},popup:function(e){const t=Gn(Un)(e,s(or).definition,s(or).controls);ur.setRoute(t)},pick:function(e){const t=Xn(e,Oe(Un()),s(or).result.fields);ur.setRoute(t)},empty:function(){const e=Xn([],Oe(Un()),s(or).result.fields,!0);ur.setRoute(e)},cancel:function(){ur.setRoute(ye(Oe(Un())).url)},cancelDownload:function(){ur.setRoute(window.location.hash.replace(/^#\/?([^\/]+)\/((result)|(download))/,"/$1/result"))},showDownloads:function(){ur.setRoute(window.location.hash.replace(/^#\/?([^\/]+)\/((result)|(download))/,"/$1/download"))},download:function(e){const t=s(or).result.full_format_urls.filter((t=>t.type==e));if(0==t.length)throw Error(`Mime type ${e} was requested but not found`);if(Yn())return Dn(t[0].location).catch((e=>{console.log(e)})),kn("Opening in default viewer"),void alert("Opening in default viewer");window.location=Rn(An(),t[0].location)}}});var lr={"/":Jn(Cn,[([e])=>(kn(`ROUTE: / (${window.location.hash})`),or.update((e=>({...e,showingMenu:!0}))),Promise.resolve({params:{definitionName:e}}))]),"/:definitionName":Jn(Cn,[rr,([e])=>(kn(`ROUTE: /:definitionName (${window.location.hash})`),Promise.resolve({params:{definitionName:e}})),er,tr,qn(ir,or),jn(or,Un,ar),er,nr]),"/:definitionName/request":Jn(Cn,[rr,([e])=>(kn(`ROUTE: /:definitionName/request (${window.location.hash})`),Promise.resolve({params:{definitionName:e}})),er,tr,qn(ir,or),jn(or,Un,ar),er,function(e){const t={arguments:we(s(or).definition.parameters,_e(s(or).controls,Oe(Un())))},n="/request/"+e.params.definitionName,r=Se(_e(s(or).controls,t.arguments.map((({name:e,value:t})=>({name:e,val:t})))));return Ln(n,t).then((t=>{const n=`/${encodeURIComponent(e.params.definitionName)}/request/${encodeURIComponent(t.location)}?${r}`;return ur.setRoute(n),e}))}]),"/:definitionName/request/:requestLocation":Jn(Cn,[rr,([e,t])=>(kn(`ROUTE: /:definitionName/request/:requestLocation (${window.location.hash})`),Promise.resolve({params:{definitionName:e,requestLocation:decodeURIComponent(t)}})),er,tr,er,qn(ir,or),jn(or,Un,ar),function(e){const t=_e(s(or).controls,Oe(Un()));return _n((function(){return Dn(e.params.requestLocation).then((e=>"preview"==e.status||"complete"==e.status?{complete:!0,value:e.location}:{complete:!1}))}),(function(e){return 300*e})).then((n=>{const r=`/${encodeURIComponent(e.params.definitionName)}/result/${encodeURIComponent(n)}?${Se(t)}`;return ur.setRoute(r),e}))}]),"/:definitionName/:resultOrDownload/:resultLocation":Jn(Cn,[([e,t,n])=>(kn(`ROUTE: /:definitionName/result/:resultLocation (${window.location.hash})`),"result"==t&&rr(),Promise.resolve({params:{showingDownload:"download"==t,definitionName:e,resultLocation:decodeURIComponent(n)}})),tr,qn(ir,or),jn(or,Un,ar),function(e){const t=e.params.showingDownload?["error","complete"]:["error","complete","preview"];return or.update((t=>({...t,showingDownload:e.params.showingDownload}))),Fn((async function(){return await Dn(e.params.resultLocation)}),s(or),t).then((t=>(or.set(t),e)))},e=>{const t=s(or).result;return t&&t.message&&esqlateShowToastError(t.message),Promise.resolve(e)},nr])};let ur;return""==window.location.hash&&(window.location.hash="/"),ur=window.Router(lr),ur.configure({notfound:e=>{ur.setRoute("/")}}),ur.init(),sr}();
//# sourceMappingURL=bundle.js.map
